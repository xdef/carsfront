window.JST||(window.JST={}),window.JST["car/list/templates/layout"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<!-- Menu -->\n<div id="menu-region" class="ui basic segment"></div>\n\n<!-- List -->\n<div id="list-region" class="ui basic segment"></div>\n\n<!-- Load more -->\n<div id="more-region" class="ui basic segment"></div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/list/templates/layout",function(){}),window.JST||(window.JST={}),window.JST["car/list/templates/menu"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a\n  data-direction\n  class="direction item"\n  data-popup\n  data-content="Направление сортировки"\n  data-position="bottom left">\n  <i class="sort content large icon"></i>\n</a>\n\n<div class="ui dropdown item">\n  <input type="hidden" name="sortBy" value="1">\n  <div class="default text">\n    ...\n  </div>\n  <i class="dropdown icon"></i>\n  <div class="menu">\n    <div class="header">\n      <i class="sort icon"></i>\n      Сортировать по\n    </div>\n    <div class="item"\n      data-value="1"\n      data-text="Сортировать по дате создания"\n      data-attr=\'createdAt\'>\n      Дата создания\n    </div>\n\n    <div class="item"\n      data-value="2"\n      data-text="Сортировать по стоимости"\n      data-attr=\'price\'>\n      Стоимость\n    </div>\n\n    <!-- <div class="item" data-value="5" data-text="Сортировать по популярности">Популярность</div> -->\n  </div>\n</div>\n\n<div class="right menu">\n  <div class="ui category search item">\n    <form class="ui transparent icon input">\n      <input class="prompt" type="text" name="query"\n        placeholder="Поиск по модели">\n      <i class="search link icon"></i>\n    </form>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/list/templates/menu",function(){}),window.JST||(window.JST={}),window.JST["car/list/templates/item"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="image">\n  '),this.photos.length&&(n.push('\n  <img src="'),n.push(i(this.photos[0].url)),n.push('">\n  ')),n.push('\n</div>\n<div class="content">\n  <a href="#!/car/'),n.push(i(this.id)),n.push('" class="header">\n    '),n.push(i(this.model)),n.push(" ("),n.push(i(this.year)),n.push(' г.)\n  </a>\n  <div class="meta">\n    <a href="#!/car/'),n.push(i(this.id)),n.push('/edit">\n      <i class="edit icon"></i>\n      Редактировать\n    </a>\n    <a href="javascript:void(null);" class="delete">\n      <i class="trash icon"></i>\n      Удалить\n    </a>\n  </div>\n  <div class="description">\n    <p>'),n.push(i(this.description)),n.push('</p>\n  </div>\n  <div class="extra">\n    <span>\n      <i class="calendar icon"></i>\n      '),n.push(i(this.formatedDate(this.createdAt))),n.push('\n    </span>\n    &nbsp;\n    <span>\n      <i class="dollar fitted icon"></i>\n      '),n.push(i(this.price)),n.push("\n    </span>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/list/templates/item",function(){}),window.JST||(window.JST={}),window.JST["car/list/templates/empty"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<i class="frown icon"></i>\n<div class="content">\n  <div class="header">\n    База автомобилей пуста\n  </div>\n  <p>\n    В локальном хранилище пока нет автомобилей.\n    Но вы можете их <a href="#!/car/create">создать</a>\n  </p>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/list/templates/empty",function(){});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/list/list_view",["app/app","base.views","./templates/layout","./templates/menu","./templates/item","./templates/empty"],function(){var e,t;return e=require("app/app"),t=require("base.views"),e.module("Car.List",function(e,n,i,r,a,o){return e.Layout=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/list/templates/layout",t.prototype.className="ui container",t.prototype.regions={menuRegion:"#menu-region",listRegion:"#list-region",moreRegion:"#more-region"},t}(t.LayoutView),e.Menu=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/list/templates/menu",t.prototype.className="ui icon menu",t.prototype.ui={dropdownBtn:".ui.dropdown",directionBtn:".direction"},t.prototype.triggers={"submit form":"submit"},t.prototype.events={"click @ui.directionBtn":"toggleDirection"},t.prototype.bindings={"[name=query]":{observe:"query"},"[data-direction]":{observe:"direction",updateMethod:"html",onGet:function(e,t){switch(Number(e)){case-1:return'<i class="sort content descending large icon"></i>';case 1:return'<i class="sort content ascending large icon"></i>'}}}},t.prototype.initSortBy=function(e){var t;return t={onChange:function(e){return function(t,n,i){return e.model.set({sort_by:i.data("attr")})}}(this)},e.dropdown(t)},t.prototype.toggleDirection=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=-Number(this.model.get("direction")),this.model.set({direction:t})},t.prototype.onRender=function(){return this.initSortBy(this.ui.dropdownBtn)},t}(t.ItemView),e.Empty=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/list/templates/empty",t.prototype.className="ui icon message",t}(t.ItemView),e.Item=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/list/templates/item",t.prototype.className="item",t.prototype.ui={destroyBtn:"a.delete"},t.prototype.triggers={"click @ui.destroyBtn":"delete"},t}(t.ItemView),e.Cars=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.className="ui very relaxed divided items",n.prototype.childView=e.Item,n.prototype.childViewEventPrefix="car",n.prototype.emptyView=e.Empty,n}(t.CollectionView)})});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/list/list_controller",["app/app","base.controllers","./list_view"],function(e){return e.module("Car.List",function(e,t,n,i,r,a){return e.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,n),i.prototype.initialize=function(e){var n,i;return this.region=e.region,this.layout=this.getLayoutView(),i=t.reqres.request("filter:entity"),n=t.reqres.request("car:entities"),this.layout.on("before:show",function(e){return function(){return e.getMenuView(i,n),t.commands.execute("when:fetched",n,function(){return e.getCarsView(n)})}}(this)),this.region.show(this.layout)},i.prototype.getLayoutView=function(){return new e.Layout},i.prototype.getMenuView=function(n,i){var r;return r=new e.Menu({model:n}),n.on("change",function(e){return t.commands.execute("car:entities:refresh",i,e)}),this.layout.showChildView("menuRegion",r)},i.prototype.getCarsView=function(n){var i;return i=new e.Cars({collection:n}),i.on("car:delete",function(e){var n,r;return r=e.model,n=e.collection,i=e.view,t.commands.execute("car:entity:destroy",r)}),this.layout.showChildView("listRegion",i)},i}(t.Controllers.Base)}),e.Car.List.Controller}),!function(e){function t(n,i){return this instanceof t?("object"==typeof n?i=n:(i=i||{},i.alias=n),this.el=void 0,this.opts=e.extend(!0,{},this.defaults,i),this.noMasksCache=i&&void 0!==i.definitions,this.userOptions=i||{},void r(this.opts.alias,i,this.opts)):new t(n,i)}function n(e){var t=document.createElement("input"),n="on"+e,i=n in t;return i||(t.setAttribute(n,"return;"),i="function"==typeof t[n]),t=null,i}function i(e){var t="text"===e||"tel"===e||"password"===e;if(!t){var n=document.createElement("input");n.setAttribute("type",e),t="text"===n.type,n=null}return t}function r(t,n,i){var a=i.aliases[t];return a?(a.alias&&r(a.alias,void 0,i),e.extend(!0,i,a),e.extend(!0,i,n),!0):(null===i.mask&&(i.mask=t),!1)}function a(t,n,i){function a(e,n){n=void 0!==n?n:t.getAttribute("data-inputmask-"+e),null!==n&&("string"==typeof n&&(0===e.indexOf("on")?n=window[n]:"false"===n?n=!1:"true"===n&&(n=!0)),"mask"===e&&0===n.indexOf("[")?(i[e]=n.replace(/[\s[\]]/g,"").split(","),i[e][0]=i[e][0].replace("'",""),i[e][i[e].length-1]=i[e][i[e].length-1].replace("'","")):i[e]=n)}var o,s,l,u=t.getAttribute("data-inputmask");u&&""!==u&&(u=u.replace(new RegExp("'","g"),'"'),s=JSON.parse("{"+u+"}"));for(o in n){if(s){l=void 0;for(var c in s)if(c.toLowerCase()===o.toLowerCase()){l=s[c];break}}a(o,l)}if(i.alias){r(i.alias,i,n);for(o in n)a(o)}return e.extend(!0,n,i),n}function o(n,i){function r(t){function i(e,t,n,i){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=n||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}function r(t,i,r){var a=n.definitions[i];r=void 0!==r?r:t.matches.length;var o=t.matches[r-1];if(a&&!g){a.placeholder=e.isFunction(a.placeholder)?a.placeholder(n):a.placeholder;for(var s=a.prevalidator,l=s?s.length:0,u=1;u<a.cardinality;u++){var c=l>=u?s[u-1]:[],p=c.validator,d=c.cardinality;t.matches.splice(r++,0,{fn:p?"string"==typeof p?new RegExp(p):new function(){this.test=p}:new RegExp("."),cardinality:d?d:1,optionality:t.isOptional,newBlockMarker:void 0===o||o.def!==(a.definitionSymbol||i),casing:a.casing,def:a.definitionSymbol||i,placeholder:a.placeholder,mask:i}),o=t.matches[r-1]}t.matches.splice(r++,0,{fn:a.validator?"string"==typeof a.validator?new RegExp(a.validator):new function(){this.test=a.validator}:new RegExp("."),cardinality:a.cardinality,optionality:t.isOptional,newBlockMarker:void 0===o||o.def!==(a.definitionSymbol||i),casing:a.casing,def:a.definitionSymbol||i,placeholder:a.placeholder,mask:i})}else t.matches.splice(r++,0,{fn:null,cardinality:0,optionality:t.isOptional,newBlockMarker:void 0===o||o.def!==i,casing:null,def:i,placeholder:void 0,mask:i}),g=!1}function a(e,t){e.isGroup&&(e.isGroup=!1,r(e,n.groupmarker.start,0),t!==!0&&r(e,n.groupmarker.end))}function o(e,t,n,i){t.matches.length>0&&(void 0===i||i)&&(n=t.matches[t.matches.length-1],a(n)),r(t,e)}function s(){if(k.length>0){if(d=k[k.length-1],o(c,d,m,!d.isAlternator),d.isAlternator){f=k.pop();for(var e=0;e<f.matches.length;e++)f.matches[e].isGroup=!1;k.length>0?(d=k[k.length-1],d.matches.push(f)):y.matches.push(f)}}else o(c,y,m)}function l(e){function t(e){return e===n.optionalmarker.start?e=n.optionalmarker.end:e===n.optionalmarker.end?e=n.optionalmarker.start:e===n.groupmarker.start?e=n.groupmarker.end:e===n.groupmarker.end&&(e=n.groupmarker.start),e}e.matches=e.matches.reverse();for(var i in e.matches){var r=parseInt(i);if(e.matches[i].isQuantifier&&e.matches[r+1]&&e.matches[r+1].isGroup){var a=e.matches[i];e.matches.splice(i,1),e.matches.splice(r+1,0,a)}void 0!==e.matches[i].matches?e.matches[i]=l(e.matches[i]):e.matches[i]=t(e.matches[i])}return e}for(var u,c,p,d,f,m,h,v=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,g=!1,y=new i,k=[],w=[];u=v.exec(t);)if(c=u[0],g)s();else switch(c.charAt(0)){case n.escapeChar:g=!0;break;case n.optionalmarker.end:case n.groupmarker.end:if(p=k.pop(),void 0!==p)if(k.length>0){if(d=k[k.length-1],d.matches.push(p),d.isAlternator){f=k.pop();for(var x=0;x<f.matches.length;x++)f.matches[x].isGroup=!1;k.length>0?(d=k[k.length-1],d.matches.push(f)):y.matches.push(f)}}else y.matches.push(p);else s();break;case n.optionalmarker.start:k.push(new i(!1,!0));break;case n.groupmarker.start:k.push(new i(!0));break;case n.quantifiermarker.start:var b=new i(!1,!1,!0);c=c.replace(/[{}]/g,"");var S=c.split(","),P=isNaN(S[0])?S[0]:parseInt(S[0]),_=1===S.length?P:isNaN(S[1])?S[1]:parseInt(S[1]);if(("*"===_||"+"===_)&&(P="*"===_?0:1),b.quantifier={min:P,max:_},k.length>0){var C=k[k.length-1].matches;u=C.pop(),u.isGroup||(h=new i(!0),h.matches.push(u),u=h),C.push(u),C.push(b)}else u=y.matches.pop(),u.isGroup||(h=new i(!0),h.matches.push(u),u=h),y.matches.push(u),y.matches.push(b);break;case n.alternatormarker:k.length>0?(d=k[k.length-1],m=d.matches.pop()):m=y.matches.pop(),m.isAlternator?k.push(m):(f=new i(!1,!1,!1,!0),f.matches.push(m),k.push(f));break;default:s()}for(;k.length>0;)p=k.pop(),a(p,!0),y.matches.push(p);return y.matches.length>0&&(m=y.matches[y.matches.length-1],a(m),w.push(y)),n.numericInput&&l(w[0]),w}function a(a,o){if(null===a||""===a)return void 0;if(1===a.length&&n.greedy===!1&&0!==n.repeat&&(n.placeholder=""),n.repeat>0||"*"===n.repeat||"+"===n.repeat){var s="*"===n.repeat?0:"+"===n.repeat?1:n.repeat;a=n.groupmarker.start+a+n.groupmarker.end+n.quantifiermarker.start+s+","+n.repeat+n.quantifiermarker.end}var l;return void 0===t.prototype.masksCache[a]||i===!0?(l={mask:a,maskToken:r(a),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:o},i!==!0&&(t.prototype.masksCache[n.numericInput?a.split("").reverse().join(""):a]=l,l=e.extend(!0,{},t.prototype.masksCache[n.numericInput?a.split("").reverse().join(""):a]))):l=e.extend(!0,{},t.prototype.masksCache[n.numericInput?a.split("").reverse().join(""):a]),l}function o(e){return e=e.toString()}var s;if(e.isFunction(n.mask)&&(n.mask=n.mask(n)),e.isArray(n.mask)){if(n.mask.length>1){n.keepStatic=null===n.keepStatic?!0:n.keepStatic;var l="(";return e.each(n.numericInput?n.mask.reverse():n.mask,function(t,n){l.length>1&&(l+=")|("),l+=o(void 0===n.mask||e.isFunction(n.mask)?n:n.mask)}),l+=")",a(l,n.mask)}n.mask=n.mask.pop()}return n.mask&&(s=void 0===n.mask.mask||e.isFunction(n.mask.mask)?a(o(n.mask),n.mask):a(o(n.mask.mask),n.mask)),s}function s(r,a,o){function l(e,t,n){t=t||0;var i,r,a,o=[],s=0;do{if(e===!0&&h().validPositions[s]){var l=h().validPositions[s];r=l.match,i=l.locator.slice(),o.push(n===!0?l.input:D(s,r))}else a=w(s,i,s-1),r=a.match,i=a.locator.slice(),o.push(D(s,r));s++}while((void 0===me||me>s-1)&&null!==r.fn||null===r.fn&&""!==r.def||t>=s);return o.pop(),o}function h(){return a}function v(e){var t=h();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function g(e,t){var n=h(),i=-1,r=n.validPositions;void 0===e&&(e=-1);var a=i,o=i;for(var s in r){var l=parseInt(s);r[l]&&(t||null!==r[l].match.fn)&&(e>=l&&(a=l),l>=e&&(o=l))}return i=-1!==a&&e-a>1||e>o?a:o}function y(t,n,i){if(o.insertMode&&void 0!==h().validPositions[t]&&void 0===i){var r,a=e.extend(!0,{},h().validPositions),s=g();for(r=t;s>=r;r++)delete h().validPositions[r];h().validPositions[t]=n;var l,u=!0,c=h().validPositions;for(r=l=t;s>=r;r++){var p=a[r];if(void 0!==p)for(var d=l,f=-1;d<T()&&(null==p.match.fn&&c[r]&&(c[r].match.optionalQuantifier===!0||c[r].match.optionality===!0)||null!=p.match.fn);){if(null===p.match.fn||!o.keepStatic&&c[r]&&(void 0!==c[r+1]&&S(r+1,c[r].locator.slice(),r).length>1||void 0!==c[r].alternation)?d++:d=F(l),b(d,p.match.def)){u=E(d,p.input,!0,!0)!==!1,l=d;break}if(u=null==p.match.fn,f===d)break;f=d}if(!u)break}if(!u)return h().validPositions=e.extend(!0,{},a),!1}else h().validPositions[t]=n;return!0}function k(e,t,n,i){var r,a=e;for(h().p=e,r=a;t>r;r++)void 0!==h().validPositions[r]&&(n===!0||o.canClearPosition(h(),r,g(),i,o)!==!1)&&delete h().validPositions[r];for(v(!0),r=a+1;r<=g();){for(;void 0!==h().validPositions[a];)a++;var s=h().validPositions[a];a>r&&(r=a+1);var l=h().validPositions[r];void 0!==l&&j(r)&&void 0===s?(b(a,l.match.def)&&E(a,l.input,!0)!==!1&&(delete h().validPositions[r],r++),a++):r++}var u=g(),c=T();for(i!==!0&&n!==!0&&void 0!==h().validPositions[u]&&h().validPositions[u].input===o.radixPoint&&delete h().validPositions[u],r=u+1;c>=r;r++)h().validPositions[r]&&delete h().validPositions[r];v(!0)}function w(e,t,n){var i=h().validPositions[e];if(void 0===i)for(var r=S(e,t,n),a=g(),s=h().validPositions[a]||S(0)[0],l=void 0!==s.alternation?s.locator[s.alternation].toString().split(","):[],u=0;u<r.length&&(i=r[u],!(i.match&&(o.greedy&&i.match.optionalQuantifier!==!0||(i.match.optionality===!1||i.match.newBlockMarker===!1)&&i.match.optionalQuantifier!==!0)&&(void 0===s.alternation||s.alternation!==i.alternation||void 0!==i.locator[s.alternation]&&A(i.locator[s.alternation].toString().split(","),l))));u++);return i}function x(e){return h().validPositions[e]?h().validPositions[e].match:S(e)[0].match}function b(e,t){for(var n=!1,i=S(e),r=0;r<i.length;r++)if(i[r].match&&i[r].match.def===t){n=!0;break}return n}function S(t,n,i,r){function a(n,i,r,l){function c(r,l,f){if(u>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+h().mask;if(u===t&&void 0===r.matches)return p.push({match:r,locator:l.reverse()}),!0;if(void 0!==r.matches){if(r.isGroup&&f!==r){if(r=c(n.matches[e.inArray(r,n.matches)+1],l))return!0}else if(r.isOptional){var m=r;if(r=a(r,i,l,f)){if(o=p[p.length-1].match,s=0===e.inArray(o,m.matches),!s)return!0;d=!0,u=t}}else if(r.isAlternator){var v,g=r,y=[],k=p.slice(),w=l.length,x=i.length>0?i.shift():-1;if(-1===x||"string"==typeof x){var b=u,S=i.slice(),P=[];"string"==typeof x&&(P=x.split(","));for(var _=0;_<g.matches.length;_++){if(p=[],r=c(g.matches[_],[_].concat(l),f)||r,r!==!0&&void 0!==r&&P[P.length-1]<g.matches.length){var C=n.matches.indexOf(r)+1;n.matches.length>C&&(r=c(n.matches[C],[C].concat(l.slice(1,l.length)),f),r&&(P.push(C.toString()),e.each(p,function(e,t){t.alternation=l.length-1})))}v=p.slice(),u=b,p=[];for(var R=0;R<S.length;R++)i[R]=S[R];for(var A=0;A<v.length;A++){var E=v[A];E.alternation=E.alternation||w;for(var j=0;j<y.length;j++){var T=y[j];if(E.match.mask===T.match.mask&&("string"!=typeof x||-1!==e.inArray(E.locator[E.alternation].toString(),P))){v.splice(A,1),A--,T.locator[E.alternation]=T.locator[E.alternation]+","+E.locator[E.alternation],T.alternation=E.alternation;break}}}y=y.concat(v)}"string"==typeof x&&(y=e.map(y,function(t,n){if(isFinite(n)){var i,r=t.alternation,a=t.locator[r].toString().split(",");t.locator[r]=void 0,t.alternation=void 0;for(var o=0;o<a.length;o++)i=-1!==e.inArray(a[o],P),i&&(void 0!==t.locator[r]?(t.locator[r]+=",",t.locator[r]+=a[o]):t.locator[r]=parseInt(a[o]),t.alternation=r);if(void 0!==t.locator[r])return t}})),p=k.concat(y),u=t,d=p.length>0}else r=g.matches[x]?c(g.matches[x],[x].concat(l),f):!1;if(r)return!0}else if(r.isQuantifier&&f!==n.matches[e.inArray(r,n.matches)-1])for(var F=r,M=i.length>0?i.shift():0;M<(isNaN(F.quantifier.max)?M+1:F.quantifier.max)&&t>=u;M++){var O=n.matches[e.inArray(F,n.matches)-1];if(r=c(O,[M].concat(l),O)){if(o=p[p.length-1].match,o.optionalQuantifier=M>F.quantifier.min-1,s=0===e.inArray(o,O.matches)){if(M>F.quantifier.min-1){d=!0,u=t;break}return!0}return!0}}else if(r=a(r,i,l,f))return!0}else u++}for(var f=i.length>0?i.shift():0;f<n.matches.length;f++)if(n.matches[f].isQuantifier!==!0){var m=c(n.matches[f],[f].concat(r),l);if(m&&u===t)return m;if(u>t)break}}var o,s,l=h().maskToken,u=n?i:0,c=n||[0],p=[],d=!1;if(r===!0&&h().tests[t])return h().tests[t];if(void 0===n){for(var f,m=t-1;void 0===(f=h().validPositions[m])&&m>-1&&(!h().tests[m]||void 0===(f=h().tests[m][0]));)m--;void 0!==f&&m>-1&&(u=m,c=f.locator.slice())}for(var v=c.shift();v<l.length;v++){var g=a(l[v],c,[v]);if(g&&u===t||u>t)break}return(0===p.length||d)&&p.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),h().tests[t]=e.extend(!0,[],p),h().tests[t]}function P(){return void 0===h()._buffer&&(h()._buffer=l(!1,1)),h()._buffer}function _(){return void 0===h().buffer&&(h().buffer=l(!0,g(),!0)),h().buffer}function C(e,t,n){var i;if(n=n||_().slice(),e===!0)v(),e=0,t=n.length;else for(i=e;t>i;i++)delete h().validPositions[i],delete h().tests[i];for(i=e;t>i;i++)v(!0),n[i]!==o.skipOptionalPartCharacter&&E(i,n[i],!0,!0)}function R(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function A(t,n){for(var i=o.greedy?n:n.slice(0,1),r=!1,a=0;a<t.length;a++)if(-1!==e.inArray(t[a],i)){r=!0;break}return r}function E(t,n,i,r){function a(t,n,i,r){var a=!1;return e.each(S(t),function(s,l){for(var u=l.match,c=n?1:0,p="",d=u.cardinality;d>c;d--)p+=O(t-(d-1));if(n&&(p+=n),a=null!=u.fn?u.fn.test(p,h(),t,i,o):n!==u.def&&n!==o.skipOptionalPartCharacter||""===u.def?!1:{c:u.def,pos:t},a!==!1){var f=void 0!==a.c?a.c:n;f=f===o.skipOptionalPartCharacter&&null===u.fn?u.def:f;var m=t,w=_();if(void 0!==a.remove&&(e.isArray(a.remove)||(a.remove=[a.remove]),e.each(a.remove.sort(function(e,t){return t-e}),function(e,t){k(t,t+1,!0)})),void 0!==a.insert&&(e.isArray(a.insert)||(a.insert=[a.insert]),e.each(a.insert.sort(function(e,t){return e-t}),function(e,t){E(t.pos,t.c,!0)})),a.refreshFromBuffer){var x=a.refreshFromBuffer;if(i=!0,C(x===!0?x:x.start,x.end,w),void 0===a.pos&&void 0===a.c)return a.pos=g(),!1;if(m=void 0!==a.pos?a.pos:t,m!==t)return a=e.extend(a,E(m,f,!0)),!1}else if(a!==!0&&void 0!==a.pos&&a.pos!==t&&(m=a.pos,C(t,m),m!==t))return a=e.extend(a,E(m,f,!0)),!1;return a!==!0&&void 0===a.pos&&void 0===a.c?!1:(s>0&&v(!0),y(m,e.extend({},l,{input:R(f,u)}),r)||(a=!1),!1)}}),a}function s(t,n,i,r){for(var a,s,l,u,c,p,d=e.extend(!0,{},h().validPositions),f=g();f>=0&&(u=h().validPositions[f],!u||void 0===u.alternation||(a=f,s=h().validPositions[a].alternation,w(a).locator[u.alternation]===u.locator[u.alternation]));f--);if(void 0!==s){a=parseInt(a);for(var m in h().validPositions)if(m=parseInt(m),u=h().validPositions[m],m>=a&&void 0!==u.alternation){var y=h().validPositions[a].locator[s].toString().split(","),k=u.locator[s]||y[0];k.length>0&&(k=k.split(",")[0]);for(var x=0;x<y.length;x++)if(k<y[x]){for(var b,S,P=m;P>=0;P--)if(b=h().validPositions[P],void 0!==b){S=b.locator[s],b.locator[s]=parseInt(y[x]);break}if(k!==b.locator[s]){var _=[],C=0;for(c=m+1;c<g()+1;c++)p=h().validPositions[c],p&&(null!=p.match.fn?_.push(p.input):t>c&&C++),delete h().validPositions[c],delete h().tests[c];for(v(!0),o.keepStatic=!o.keepStatic,l=!0;_.length>0;){var R=_.shift();if(R!==o.skipOptionalPartCharacter&&!(l=E(g()+1,R,!1,!0)))break}if(b.alternation=s,b.locator[s]=S,l){var A=g(t)+1,j=0;for(c=m+1;c<g()+1;c++)p=h().validPositions[c],p&&null==p.match.fn&&t>c&&j++;t+=j-C,l=E(t>A?A:t,n,i,r)}if(o.keepStatic=!o.keepStatic,l)return l;v(),h().validPositions=e.extend(!0,{},d)}}break}}return!1}function l(t,n){for(var i=h().validPositions[n],r=i.locator,a=r.length,o=t;n>o;o++)if(!j(o)){var s=S(o),l=s[0],u=-1;e.each(s,function(e,t){for(var n=0;a>n;n++)t.locator[n]&&A(t.locator[n].toString().split(","),r[n].toString().split(","))&&n>u&&(u=n,l=t)}),y(o,e.extend({},l,{input:l.match.def}),!0)}}i=i===!0;for(var u=_(),c=t-1;c>-1&&!h().validPositions[c];c--);for(c++;t>c;c++)void 0===h().validPositions[c]&&((!j(c)||u[c]!==D(c))&&S(c).length>1||u[c]===o.radixPoint||"0"===u[c]&&e.inArray(o.radixPoint,u)<c)&&a(c,u[c],!0);var p=t,d=!1,f=e.extend(!0,{},h().validPositions);if(p<T()&&(_(),d=a(p,n,i,r),(!i||r)&&d===!1)){var m=h().validPositions[p];if(!m||null!==m.match.fn||m.match.def!==n&&n!==o.skipOptionalPartCharacter){if((o.insertMode||void 0===h().validPositions[F(p)])&&!j(p))for(var x=p+1,b=F(p);b>=x;x++)if(d=a(x,n,i,r),d!==!1){l(p,x),p=x;break}}else d={caret:F(p)}}if(d===!1&&o.keepStatic&&L(u)&&(d=s(t,n,i,r)),d===!0&&(d={pos:p}),e.isFunction(o.postValidation)&&d!==!1&&!i){v(!0);var P=o.postValidation(_(),o);if(P){if(P.refreshFromBuffer){var M=P.refreshFromBuffer;C(M===!0?M:M.start,M.end,P.buffer),v(!0),d=P}}else v(!0),h().validPositions=e.extend(!0,{},f),d=!1}return d}function j(e){var t=x(e);if(null!=t.fn)return t.fn;if(e>-1&&!o.keepStatic&&void 0===h().validPositions[e]){for(var n=S(e),i=!0,r=0;r<n.length;r++)if(""!==n[r].match.def&&(void 0===n[r].alternation||n[r].locator[n[r].alternation].length>1)){i=!1;break}return i}return!1}function T(){var e;me=void 0!==de?de.maxLength:void 0,-1===me&&(me=void 0);var t,n=g(),i=h().validPositions[n],r=void 0!==i?i.locator.slice():void 0;for(t=n+1;void 0===i||null!==i.match.fn||null===i.match.fn&&""!==i.match.def;t++)i=w(t,r,t-1),r=i.locator.slice();var a=x(t-1);return e=""!==a.def?t:t-1,void 0===me||me>e?e:me}function F(e,t){var n=T();if(e>=n)return n;for(var i=e;++i<n&&(t===!0&&(x(i).newBlockMarker!==!0||!j(i))||t!==!0&&!j(i)&&(o.nojumps!==!0||o.nojumpsThreshold>i)););return i}function M(e,t){var n=e;if(0>=n)return 0;for(;--n>0&&(t===!0&&x(n).newBlockMarker!==!0||t!==!0&&!j(n)););return n}function O(e){return void 0===h().validPositions[e]?D(e):h().validPositions[e].input}function I(t,n,i,r,a){if(r&&e.isFunction(o.onBeforeWrite)){var s=o.onBeforeWrite.call(t,r,n,i,o);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;C(l===!0?l:l.start,l.end,s.buffer||n),v(!0),n=_()}void 0!==i&&(i=void 0!==s.caret?s.caret:i)}}t.inputmask._valueSet(n.join("")),void 0===i||void 0!==r&&"blur"===r.type||V(t,i),a===!0&&(ye=!0,e(t).trigger("input"))}function D(e,t){if(t=t||x(e),void 0!==t.placeholder)return t.placeholder;if(null===t.fn){if(e>-1&&!o.keepStatic&&void 0===h().validPositions[e]){for(var n,i=S(e),r=!1,a=0;a<i.length;a++){if(n&&""!==i[a].match.def&&i[a].match.def!==n.match.def&&(void 0===i[a].alternation||i[a].alternation===n.alternation)){r=!0;break}i[a].match.optionality!==!0&&i[a].match.optionalQuantifier!==!0&&(n=i[a])}if(r)return o.placeholder.charAt(e%o.placeholder.length)}return t.def}return o.placeholder.charAt(e%o.placeholder.length)}function B(n,i,r,a){function s(){var e=!1,t=P().slice(c,F(c)).join("").indexOf(u);if(-1!==t&&!j(c)){e=!0;for(var n=P().slice(c,c+t),i=0;i<n.length;i++)if(" "!==n[i]){e=!1;break}}return e}var l=a.slice(),u="",c=0;if(v(),h().p=F(-1),!r)if(o.autoUnmask!==!0){var p=P().slice(0,F(-1)).join(""),d=l.join("").match(new RegExp("^"+t.escapeRegex(p),"g"));d&&d.length>0&&(l.splice(0,d.length*p.length),c=F(c))}else c=F(c);e.each(l,function(t,i){var a=e.Event("keypress");a.which=i.charCodeAt(0),u+=i;var l=g(void 0,!0),p=h().validPositions[l],d=w(l+1,p?p.locator.slice():void 0,l);if(!s()||r||o.autoUnmask){var f=r?t:null==d.match.fn&&d.match.optionality&&l+1<h().p?l+1:h().p;W.call(n,a,!0,!1,r,f),c=f+1,u=""}else W.call(n,a,!0,!1,!0,l+1)}),i&&I(n,_(),document.activeElement===n?F(g(0)):void 0,e.Event("checkval"))}function N(t){if(t&&void 0===t.inputmask)return t.value;var n=[],i=h().validPositions;for(var r in i)i[r].match&&null!=i[r].match.fn&&n.push(i[r].input);var a=0===n.length?null:(ve?n.reverse():n).join("");if(null!==a){var s=(ve?_().slice().reverse():_()).join("");e.isFunction(o.onUnMask)&&(a=o.onUnMask.call(t,s,a,o)||a)}return a}function V(e,t,n){function i(e){if(ve&&"number"==typeof e&&(!o.greedy||""!==o.placeholder)){var t=_().join("").length;e=t-e}return e}var r;if("number"!=typeof t)return e.setSelectionRange?(t=e.selectionStart,n=e.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),(r.commonAncestorContainer.parentNode===e||r.commonAncestorContainer===e)&&(t=r.startOffset,n=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),t=0-r.duplicate().moveStart("character",-1e5),n=t+r.text.length),{begin:i(t),end:i(n)};t=i(t),n=i(n),n="number"==typeof n?n:t;var a=parseInt(((e.ownerDocument.defaultView||window).getComputedStyle?(e.ownerDocument.defaultView||window).getComputedStyle(e,null):e.currentStyle).fontSize)*n;if(e.scrollLeft=a>e.scrollWidth?a:0,p||o.insertMode!==!1||t!==n||n++,e.setSelectionRange)e.selectionStart=t,e.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),void 0===e.firstChild){var s=document.createTextNode("");e.appendChild(s)}r.setStart(e.firstChild,t<e.inputmask._valueGet().length?t:e.inputmask._valueGet().length),r.setEnd(e.firstChild,n<e.inputmask._valueGet().length?n:e.inputmask._valueGet().length),r.collapse(!0);var l=window.getSelection();l.removeAllRanges(),l.addRange(r)}else e.createTextRange&&(r=e.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select())}function G(t){var n,i,r=_(),a=r.length,o=g(),s={},l=h().validPositions[o],u=void 0!==l?l.locator.slice():void 0;for(n=o+1;n<r.length;n++)i=w(n,u,n-1),u=i.locator.slice(),s[n]=e.extend(!0,{},i);var c=l&&void 0!==l.alternation?l.locator[l.alternation]:void 0;for(n=a-1;n>o&&(i=s[n],(i.match.optionality||i.match.optionalQuantifier||c&&(c!==s[n].locator[l.alternation]&&null!=i.match.fn||null===i.match.fn&&i.locator[l.alternation]&&A(i.locator[l.alternation].toString().split(","),c.toString().split(","))&&""!==S(n)[0].def))&&r[n]===D(n,i.match));n--)a--;return t?{l:a,def:s[a]?s[a].match:void 0}:a}function q(e){for(var t=G(),n=e.length-1;n>t&&!j(n);n--);return e.splice(t,n+1-t),e}function L(t){if(e.isFunction(o.isComplete))return o.isComplete.call(de,t,o);if("*"===o.repeat)return void 0;var n=!1,i=G(!0),r=M(i.l);if(void 0===i.def||i.def.newBlockMarker||i.def.optionality||i.def.optionalQuantifier){n=!0;for(var a=0;r>=a;a++){var s=w(a).match;if(null!==s.fn&&void 0===h().validPositions[a]&&s.optionality!==!0&&s.optionalQuantifier!==!0||null===s.fn&&t[a]!==D(a,s)){n=!1;break}}}return n}function H(e,t){return ve?e-t>1||e-t===1&&o.insertMode:t-e>1||t-e===1&&o.insertMode}function J(n){return function(i){var r=!1,a=!1;if(void 0===this.inputmask){var s=e.data(this,"_inputmask_opts");s?new t(s).mask(this):e(this).off(".inputmask")}else{if("setvalue"===i.type||!(this.disabled||this.readOnly&&!("keydown"===i.type&&i.ctrlKey&&67===i.keyCode||o.tabThrough===!1&&i.keyCode===t.keyCode.TAB))){switch(i.type){case"input":if(ye===!0||r===!0)return ye=!1,i.preventDefault();a=!1;break;case"keydown":ge=!1,r=!1,a=!0;break;case"keypress":if(ge===!0)return i.preventDefault();ge=!0;break;case"compositionstart":r=!0;break;case"compositionupdate":ye=a;break;case"compositionend":r=!1,a=!1;break;case"cut":ye=!0}return n.apply(this,arguments)}i.preventDefault()}}}function K(t){function n(t){if(e.valHooks&&(void 0===e.valHooks[t]||e.valHooks[t].inputmaskpatch!==!0)){var n=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},i=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var t=n(e),i=e.inputmask.maskset,r=i._buffer;return r=r?r.join(""):"",t!==r?t:""}return n(e)},set:function(t,n){var r,a=e(t);return r=i(t,n),t.inputmask&&a.trigger("setvalue.inputmask"),r},inputmaskpatch:!0}}}function i(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():s.call(this)!==P().join("")?document.activeElement===this&&o.clearMaskOnLostFocus?(ve?q(_()).reverse():q(_())).join(""):s.call(this):"":s.call(this);
}function r(t){l.call(this,t),this.inputmask&&e(this).trigger("setvalue.inputmask")}function a(t){e(t).on("mouseenter.inputmask",J(function(t){var n=e(this),i=this,r=i.inputmask._valueGet();""!==r&&r!==_().join("")&&n.trigger("setvalue.inputmask")}))}var s,l;t.inputmask.__valueGet||(Object.getOwnPropertyDescriptor&&void 0===t.value?(s=function(){return this.textContent},l=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:i,set:r})):document.__lookupGetter__&&t.__lookupGetter__("value")?(s=t.__lookupGetter__("value"),l=t.__lookupSetter__("value"),t.__defineGetter__("value",i),t.__defineSetter__("value",r)):(s=function(){return t.value},l=function(e){t.value=e},n(t.type),a(t)),t.inputmask.__valueGet=s,t.inputmask._valueGet=function(e){return ve&&e!==!0?s.call(this.el).split("").reverse().join(""):s.call(this.el)},t.inputmask.__valueSet=l,t.inputmask._valueSet=function(e,t){l.call(this.el,null===e||void 0===e?"":t!==!0&&ve?e.split("").reverse().join(""):e)})}function U(n,i,r,a){function s(){if(o.keepStatic){v(!0);var t,i=[],r=e.extend(!0,{},h().validPositions);for(t=g();t>=0;t--){var a=h().validPositions[t];if(a&&(null!=a.match.fn&&i.push(a.input),delete h().validPositions[t],void 0!==a.alternation&&a.locator[a.alternation]===w(t).locator[a.alternation]))break}if(t>-1)for(;i.length>0;){h().p=F(g());var s=e.Event("keypress");s.which=i.pop().charCodeAt(0),W.call(n,s,!0,!1,!1,h().p)}else h().validPositions=e.extend(!0,{},r)}}if((o.numericInput||ve)&&(i===t.keyCode.BACKSPACE?i=t.keyCode.DELETE:i===t.keyCode.DELETE&&(i=t.keyCode.BACKSPACE),ve)){var l=r.end;r.end=r.begin,r.begin=l}i===t.keyCode.BACKSPACE&&(r.end-r.begin<1||o.insertMode===!1)?(r.begin=M(r.begin),void 0===h().validPositions[r.begin]||h().validPositions[r.begin].input!==o.groupSeparator&&h().validPositions[r.begin].input!==o.radixPoint||r.begin--):i===t.keyCode.DELETE&&r.begin===r.end&&(r.end=j(r.end)?r.end+1:F(r.end)+1,void 0===h().validPositions[r.begin]||h().validPositions[r.begin].input!==o.groupSeparator&&h().validPositions[r.begin].input!==o.radixPoint||r.end++),k(r.begin,r.end,!1,a),a!==!0&&s();var u=g(r.begin);u<r.begin?(-1===u&&v(),h().p=F(u)):a!==!0&&(h().p=r.begin)}function z(i){var r=this,a=e(r),s=i.keyCode,l=V(r);s===t.keyCode.BACKSPACE||s===t.keyCode.DELETE||u&&127===s||i.ctrlKey&&88===s&&!n("cut")?(i.preventDefault(),88===s&&(ce=_().join("")),U(r,s,l),I(r,_(),h().p,i,ce!==_().join("")),r.inputmask._valueGet()===P().join("")?a.trigger("cleared"):L(_())===!0&&a.trigger("complete"),o.showTooltip&&(r.title=o.tooltip||h().mask)):s===t.keyCode.END||s===t.keyCode.PAGE_DOWN?setTimeout(function(){var e=F(g());o.insertMode||e!==T()||i.shiftKey||e--,V(r,i.shiftKey?l.begin:e,e)},0):s===t.keyCode.HOME&&!i.shiftKey||s===t.keyCode.PAGE_UP?V(r,0,i.shiftKey?l.begin:0):(o.undoOnEscape&&s===t.keyCode.ESCAPE||90===s&&i.ctrlKey)&&i.altKey!==!0?(B(r,!0,!1,ce.split("")),a.trigger("click")):s!==t.keyCode.INSERT||i.shiftKey||i.ctrlKey?o.tabThrough===!0&&s===t.keyCode.TAB?(i.shiftKey===!0?(null===x(l.begin).fn&&(l.begin=F(l.begin)),l.end=M(l.begin,!0),l.begin=M(l.end,!0)):(l.begin=F(l.begin,!0),l.end=F(l.begin,!0),l.end<T()&&l.end--),l.begin<T()&&(i.preventDefault(),V(r,l.begin,l.end))):o.insertMode!==!1||i.shiftKey||(s===t.keyCode.RIGHT?setTimeout(function(){var e=V(r);V(r,e.begin)},0):s===t.keyCode.LEFT&&setTimeout(function(){var e=V(r);V(r,ve?e.begin+1:e.begin-1)},0)):(o.insertMode=!o.insertMode,V(r,o.insertMode||l.begin!==T()?l.begin:l.begin-1)),o.onKeyDown(i,_(),V(r).begin,o),ke=-1!==e.inArray(s,o.ignorables)}function W(n,i,r,a,s){var l=this,u=e(l),c=n.which||n.charCode||n.keyCode;if(!(i===!0||n.ctrlKey&&n.altKey)&&(n.ctrlKey||n.metaKey||ke))return c===t.keyCode.ENTER&&ce!==_().join("")&&(ce=_().join(""),n.preventDefault(),setTimeout(function(){u.trigger("change")},0)),!0;if(c){46===c&&n.shiftKey===!1&&","===o.radixPoint&&(c=44);var p,d=i?{begin:s,end:s}:V(l),f=String.fromCharCode(c),m=H(d.begin,d.end);m&&(h().undoPositions=e.extend(!0,{},h().validPositions),U(l,t.keyCode.DELETE,d,!0),d.begin=h().p,o.insertMode||(o.insertMode=!o.insertMode,y(d.begin,a),o.insertMode=!o.insertMode),m=!o.multi),h().writeOutBuffer=!0;var g=ve&&!m?d.end:d.begin,k=E(g,f,a);if(k!==!1){if(k!==!0&&(g=void 0!==k.pos?k.pos:g,f=void 0!==k.c?k.c:f),v(!0),void 0!==k.caret)p=k.caret;else{var w=h().validPositions;p=!o.keepStatic&&(void 0!==w[g+1]&&S(g+1,w[g].locator.slice(),g).length>1||void 0!==w[g].alternation)?g+1:F(g)}h().p=p}if(r!==!1){var x=this;if(setTimeout(function(){o.onKeyValidation.call(x,k,o)},0),h().writeOutBuffer&&k!==!1){var b=_();I(l,b,i?void 0:o.numericInput?M(p):p,n,i!==!0),i!==!0&&setTimeout(function(){L(b)===!0&&u.trigger("complete")},0)}else m&&(h().buffer=void 0,h().validPositions=h().undoPositions)}else m&&(h().buffer=void 0,h().validPositions=h().undoPositions);if(o.showTooltip&&(l.title=o.tooltip||h().mask),i&&e.isFunction(o.onBeforeWrite)){var P=o.onBeforeWrite(n,_(),p,o);if(P&&P.refreshFromBuffer){var R=P.refreshFromBuffer;C(R===!0?R:R.start,R.end,P.buffer),v(!0),P.caret&&(h().p=P.caret)}}if(n.preventDefault(),i)return k}}function Q(t){var n=this,i=t.originalEvent||t,r=e(n),a=n.inputmask._valueGet(!0),s=V(n);if("propertychange"===t.type&&n.inputmask._valueGet().length<=T())return!0;if("paste"===t.type){var l=a.substr(0,s.begin),u=a.substr(s.end,a.length);l===P().slice(0,s.begin).join("")&&(l=""),u===P().slice(s.end).join("")&&(u=""),window.clipboardData&&window.clipboardData.getData?a=l+window.clipboardData.getData("Text")+u:i.clipboardData&&i.clipboardData.getData&&(a=l+i.clipboardData.getData("text/plain")+u)}var c=a;if(e.isFunction(o.onBeforePaste)){if(c=o.onBeforePaste.call(n,a,o),c===!1)return t.preventDefault(),!1;c||(c=a)}return B(n,!1,!1,ve?c.split("").reverse():c.toString().split("")),I(n,_(),void 0,t,!0),r.trigger("click"),L(_())===!0&&r.trigger("complete"),!1}function Y(t){var n=this;B(n,!0,!1,n.inputmask._valueGet().split("")),L(_())===!0&&e(n).trigger("complete"),t.preventDefault()}function $(e){var n=this,i=V(n),r=n._valueGet();r=r.replace(new RegExp("("+t.escapeRegex(P().join(""))+")*"),""),i.begin>r.length&&(V(n,r.length),i=V(n)),_().length-r.length!==1||r.charAt(i.begin)===_()[i.begin]||r.charAt(i.begin+1)===_()[i.begin]||j(i.begin)?Y.call(this,e):(e.keyCode=o.keyCode.BACKSPACE,z.call(n,e)),e.preventDefault()}function Z(e){var t=e.originalEvent||e;ce=_().join(""),""===pe||0!==t.data.indexOf(pe)}function X(t){var n=this,i=t.originalEvent||t;0===i.data.indexOf(pe)&&(v(),h().p=F(-1),ye=!0);for(var r=i.data,a=0;a<r.length;a++){var s=e.Event("keypress");s.which=r.charCodeAt(a),ge=!1,ke=!1,W.call(n,s,!0,!1,!1,h().p)}setTimeout(function(){var e=h().p;I(n,_(),o.numericInput?M(e):e)},0),pe=i.data}function ee(e){}function te(t){var n=this,i=n.inputmask._valueGet();B(n,!0,!1,(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(n,i,o)||i:i).split("")),ce=_().join(""),(o.clearMaskOnLostFocus||o.clearIncomplete)&&n.inputmask._valueGet()===P().join("")&&n.inputmask._valueSet("")}function ne(e){var t=this,n=t.inputmask._valueGet();o.showMaskOnFocus&&(!o.showMaskOnHover||o.showMaskOnHover&&""===n)?t.inputmask._valueGet()!==_().join("")&&I(t,_(),F(g())):we===!1&&V(t,F(g())),o.positionCaretOnTab===!0&&setTimeout(function(){V(t,F(g()))},0),ce=_().join("")}function ie(e){var t=this;if(we=!1,o.clearMaskOnLostFocus){var n=_().slice(),i=t.inputmask._valueGet();document.activeElement!==t&&i!==t.getAttribute("placeholder")&&""!==i&&(-1===g()&&i===P().join("")?n=[]:q(n),I(t,n))}}function re(t){function n(t){if(o.radixFocus&&""!==o.radixPoint){var n=h().validPositions;if(void 0===n[t]||n[t].input===D(t)){if(t<F(-1))return!0;var i=e.inArray(o.radixPoint,_());if(-1!==i){for(var r in n)if(r>i&&n[r].input!==D(r))return!1;return!0}}}return!1}var i=this;if(document.activeElement===i){var r=V(i);if(r.begin===r.end)if(n(r.begin))V(i,e.inArray(o.radixPoint,_()));else{var a=r.begin,s=g(a),l=F(s);l>a?V(i,j(a)||j(a-1)?a:F(a)):V(i,o.numericInput?0:l)}}}function ae(e){var t=this;setTimeout(function(){V(t,0,F(g()))},0)}function oe(n){var i=this,r=e(i),a=V(i),s=n.originalEvent||n,l=window.clipboardData||s.clipboardData,u=ve?_().slice(a.end,a.begin):_().slice(a.begin,a.end);l.setData("text",ve?u.reverse().join(""):u.join("")),document.execCommand&&document.execCommand("copy"),U(i,t.keyCode.DELETE,a),I(i,_(),h().p,n,ce!==_().join("")),i.inputmask._valueGet()===P().join("")&&r.trigger("cleared"),o.showTooltip&&(i.title=o.tooltip||h().mask)}function se(t){var n=e(this),i=this;if(i.inputmask){var r=i.inputmask._valueGet(),a=_().slice();ce!==a.join("")&&setTimeout(function(){n.trigger("change"),ce=a.join("")},0),""!==r&&(o.clearMaskOnLostFocus&&(-1===g()&&r===P().join("")?a=[]:q(a)),L(a)===!1&&(setTimeout(function(){n.trigger("incomplete")},0),o.clearIncomplete&&(v(),a=o.clearMaskOnLostFocus?[]:P().slice())),I(i,a,void 0,t))}}function le(e){var t=this;we=!0,document.activeElement!==t&&o.showMaskOnHover&&t.inputmask._valueGet()!==_().join("")&&I(t,_())}function ue(t){if(de=t,fe=e(de),o.showTooltip&&(de.title=o.tooltip||h().mask),("rtl"===de.dir||o.rightAlign)&&(de.style.textAlign="right"),("rtl"===de.dir||o.numericInput)&&(de.dir="ltr",de.removeAttribute("dir"),de.inputmask.isRTL=!0,ve=!0),fe.off(".inputmask"),K(de),("INPUT"===de.tagName&&i(de.getAttribute("type"))||de.isContentEditable)&&(e(de.form).on("submit",function(){ce!==_().join("")&&fe.trigger("change"),o.clearMaskOnLostFocus&&-1===g()&&de.inputmask._valueGet&&de.inputmask._valueGet()===P().join("")&&de.inputmask._valueSet(""),o.removeMaskOnSubmit&&(de.inputmask._valueSet(de.inputmask.unmaskedvalue(),!0),setTimeout(function(){I(de,_())},0))}).on("reset",function(){setTimeout(function(){fe.trigger("setvalue.inputmask")},0)}),fe.on("mouseenter.inputmask",J(le)).on("blur.inputmask",J(se)).on("focus.inputmask",J(ne)).on("mouseleave.inputmask",J(ie)).on("click.inputmask",J(re)).on("dblclick.inputmask",J(ae)).on(m+".inputmask dragdrop.inputmask drop.inputmask",J(Q)).on("cut.inputmask",J(oe)).on("complete.inputmask",J(o.oncomplete)).on("incomplete.inputmask",J(o.onincomplete)).on("cleared.inputmask",J(o.oncleared)).on("keydown.inputmask",J(z)).on("keypress.inputmask",J(W)),d||fe.on("compositionstart.inputmask",J(Z)).on("compositionupdate.inputmask",J(X)).on("compositionend.inputmask",J(ee)),"paste"===m&&fe.on("input.inputmask",J(Y)),(c||d||p||f)&&(fe.off("input.inputmask"),fe.on("input.inputmask",J($)))),fe.on("setvalue.inputmask",J(te)),""!==de.inputmask._valueGet()||o.clearMaskOnLostFocus===!1){var n=e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(de,de.inputmask._valueGet(),o)||de.inputmask._valueGet():de.inputmask._valueGet();B(de,!0,!1,n.split(""));var r=_().slice();ce=r.join(""),L(r)===!1&&o.clearIncomplete&&v(),o.clearMaskOnLostFocus&&(r.join("")===P().join("")?r=[]:q(r)),I(de,r),document.activeElement===de&&V(de,F(g()))}}var ce,pe,de,fe,me,he,ve=!1,ge=!1,ye=!1,ke=!1,we=!0;if(void 0!==r)switch(r.action){case"isComplete":return de=r.el,L(_());case"unmaskedvalue":return de=r.el,void 0!==de&&void 0!==de.inputmask?(a=de.inputmask.maskset,o=de.inputmask.opts,ve=de.inputmask.isRTL,he=ve?de.inputmask._valueGet().split("").reverse().join(""):de.inputmask._valueGet()):he=r.value,o.numericInput&&(ve=!0),he=(e.isFunction(o.onBeforeMask)?o.onBeforeMask(he,o)||he:he).split(""),B(void 0,!1,!1,ve?he.reverse():he),e.isFunction(o.onBeforeWrite)&&o.onBeforeWrite(void 0,_(),0,o),N(de);case"mask":de=r.el,a=de.inputmask.maskset,o=de.inputmask.opts,ve=de.inputmask.isRTL,ce=_().join(""),ue(de);break;case"format":return o.numericInput&&(ve=!0),he=(e.isFunction(o.onBeforeMask)?o.onBeforeMask(r.value,o)||r.value:r.value).split(""),B(void 0,!1,!1,ve?he.reverse():he),e.isFunction(o.onBeforeWrite)&&o.onBeforeWrite(void 0,_(),0,o),r.metadata?{value:ve?_().slice().reverse().join(""):_().join(""),metadata:s({action:"getmetadata"},a,o)}:ve?_().slice().reverse().join(""):_().join("");case"isValid":o.numericInput&&(ve=!0),he=r.value.split(""),B(void 0,!1,!0,ve?he.reverse():he);for(var xe=_(),be=G(),Se=xe.length-1;Se>be&&!j(Se);Se--);return xe.splice(be,Se+1-be),L(xe)&&r.value===xe.join("");case"getemptymask":return P();case"remove":de=r.el,fe=e(de),a=de.inputmask.maskset,o=de.inputmask.opts,de.inputmask._valueSet(N(de)),fe.off(".inputmask");var Pe;Object.getOwnPropertyDescriptor&&(Pe=Object.getOwnPropertyDescriptor(de,"value")),Pe&&Pe.get?de.inputmask.__valueGet&&Object.defineProperty(de,"value",{get:de.inputmask.__valueGet,set:de.inputmask.__valueSet}):document.__lookupGetter__&&de.__lookupGetter__("value")&&de.inputmask.__valueGet&&(de.__defineGetter__("value",de.inputmask.__valueGet),de.__defineSetter__("value",de.inputmask.__valueSet)),de.inputmask=void 0;break;case"getmetadata":if(e.isArray(a.metadata)){for(var _e,Ce=g(),Re=Ce;Re>=0;Re--)if(h().validPositions[Re]&&void 0!==h().validPositions[Re].alternation){_e=h().validPositions[Re].alternation;break}return void 0!==_e?a.metadata[h().validPositions[Ce].locator[_e]]:a.metadata[0]}return a.metadata}}t.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:e.noop,onBeforeMask:null,onBeforePaste:function(t,n){return e.isFunction(n.onBeforeMask)?n.onBeforeMask(t,n):t},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,tooltip:void 0,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",groupSeparator:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:null,positionCaretOnTab:!1,tabThrough:!1,supportsInputType:[],definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:e.noop,postValidation:null},masksCache:{},mask:function(n){var i=this;return n=void 0===n.length?[n]:n,e.each(n,function(n,r){var l=e.extend(!0,{},i.opts);a(r,l,e.extend(!0,{},i.userOptions));var u=o(l,i.noMasksCache);void 0!==u&&(void 0!==r.inputmask&&r.inputmask.remove(),r.inputmask=new t,r.inputmask.opts=l,r.inputmask.noMasksCache=i.noMasksCache,r.inputmask.userOptions=e.extend(!0,{},i.userOptions),r.inputmask.el=r,r.inputmask.maskset=u,r.inputmask.isRTL=!1,e.data(r,"_inputmask_opts",l),s({action:"mask",el:r}))}),n?n[0].inputmask||this:this},option:function(t){return"string"==typeof t?this.opts[t]:"object"==typeof t?(e.extend(this.opts,t),e.extend(this.userOptions,t),this.el&&(void 0!==t.mask||void 0!==t.alias?this.mask(this.el):(e.data(this.el,"_inputmask_opts",this.opts),s({action:"mask",el:this.el}))),this):void 0},unmaskedvalue:function(e){return s({action:"unmaskedvalue",el:this.el,value:e},this.el&&this.el.inputmask?this.el.inputmask.maskset:o(this.opts,this.noMasksCache),this.opts)},remove:function(){return this.el?(s({action:"remove",el:this.el}),this.el.inputmask=void 0,this.el):void 0},getemptymask:function(){return s({action:"getemptymask"},this.maskset||o(this.opts,this.noMasksCache),this.opts)},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return s({action:"isComplete",el:this.el},this.maskset||o(this.opts,this.noMasksCache),this.opts)},getmetadata:function(){return s({action:"getmetadata"},this.maskset||o(this.opts,this.noMasksCache),this.opts)},isValid:function(e){return s({action:"isValid",value:e},this.maskset||o(this.opts,this.noMasksCache),this.opts)},format:function(e,t){return s({action:"format",value:e,metadata:t},this.maskset||o(this.opts,this.noMasksCache),this.opts)}},t.extendDefaults=function(n){e.extend(!0,t.prototype.defaults,n)},t.extendDefinitions=function(n){e.extend(!0,t.prototype.defaults.definitions,n)},t.extendAliases=function(n){e.extend(!0,t.prototype.defaults.aliases,n)},t.format=function(e,n,i){return t(n).format(e,i)},t.unmask=function(e,n){return t(n).unmaskedvalue(e)},t.isValid=function(e,n){return t(n).isValid(e)},t.remove=function(t){e.each(t,function(e,t){t.inputmask&&t.inputmask.remove()})},t.escapeRegex=function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},t.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};var l=navigator.userAgent,u=null!==l.match(new RegExp("iphone","i")),c=null!==l.match(new RegExp("android.*safari.*","i")),p=null!==l.match(new RegExp("android.*chrome.*","i")),d=null!==l.match(new RegExp("android.*firefox.*","i")),f=/Kindle/i.test(l)||/Silk/i.test(l)||/KFTT/i.test(l)||/KFOT/i.test(l)||/KFJWA/i.test(l)||/KFJWI/i.test(l)||/KFSOWI/i.test(l)||/KFTHWA/i.test(l)||/KFTHWI/i.test(l)||/KFAPWA/i.test(l)||/KFAPWI/i.test(l),m=n("paste")?"paste":n("input")?"input":"propertychange";return window.Inputmask=t,t}(jQuery),function(e,t){return void 0===e.fn.inputmask&&(e.fn.inputmask=function(n,i){var r,a;if(i=i||{},"string"==typeof n)switch(n){case"mask":return r=new t(i),this.each(function(){r.mask(this)});case"unmaskedvalue":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.unmaskedvalue():e(a).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.getemptymask():"";case"hasMaskedValue":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.hasMaskedValue():!1;case"isComplete":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.isComplete():!0;case"getmetadata":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.getmetadata():void 0;case"setvalue":a=this.jquery&&this.length>0?this[0]:this,e(a).val(i),void 0!==a.inputmask&&e(a).triggerHandler("setvalue.inputmask");break;case"option":if("string"!=typeof i)return this.each(function(){return void 0!==this.inputmask?this.inputmask.option(i):void 0});if(a=this.jquery&&this.length>0?this[0]:this,void 0!==a.inputmask)return a.inputmask.option(i);break;default:return i.alias=n,r=new t(i),this.each(function(){r.mask(this)})}else{if("object"==typeof n)return r=new t(n),void 0===n.mask&&void 0===n.alias?this.each(function(){return void 0!==this.inputmask?this.inputmask.option(n):void r.mask(this)}):this.each(function(){r.mask(this)});if(void 0===n)return this.each(function(){r=new t(i),r.mask(this)})}}),e.fn.inputmask}(jQuery,Inputmask),function(e,t){return t.extendDefinitions({h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),t.extendAliases({"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+n+"[01])")},val2:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9])"+n+"(0[1-9]|1[012]))|(30"+n+"(0[13-9]|1[012]))|(31"+n+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,n){if(isNaN(e))return!1;var i=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(n.toString().slice(e.length)));return(isNaN(i)?!1:i>=t&&n>=i)||(isNaN(r)?!1:r>=t&&n>=r)},determinebaseyear:function(e,t,n){var i=(new Date).getFullYear();if(e>i)return e;if(i>t){for(var r=t.toString().slice(0,2),a=t.toString().slice(2,4);r+n>t;)r--;var o=r+a;return e>o?e:o}return i},onKeyDown:function(n,i,r,a){var o=e(this);if(n.ctrlKey&&n.keyCode===t.keyCode.RIGHT){var s=new Date;o.val(s.getDate().toString()+(s.getMonth()+1).toString()+s.getFullYear().toString()),o.trigger("setvalue.inputmask")}},getFrontValue:function(e,t,n){for(var i=0,r=0,a=0;a<e.length&&"2"!==e.charAt(a);a++){var o=n.definitions[e.charAt(a)];o?(i+=r,r=o.cardinality):r++}return t.join("").substr(i,r)},definitions:{1:{validator:function(e,t,n,i,r){var a=r.regex.val1.test(e);return i||a||e.charAt(1)!==r.separator&&-1==="-./".indexOf(e.charAt(1))||!(a=r.regex.val1.test("0"+e.charAt(0)))?a:(t.buffer[n-1]="0",{refreshFromBuffer:{start:n-1,end:n},pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,r){var a=e;isNaN(t.buffer[n+1])||(a+=t.buffer[n+1]);var o=1===a.length?r.regex.val1pre.test(a):r.regex.val1.test(a);if(!i&&!o){if(o=r.regex.val1.test(e+"0"))return t.buffer[n]=e,t.buffer[++n]="0",{pos:n,c:"0"};if(o=r.regex.val1.test("0"+e))return t.buffer[n]="0",n++,{pos:n}}return o},cardinality:1}]},2:{validator:function(e,t,n,i,r){var a=r.getFrontValue(t.mask,t.buffer,r);-1!==a.indexOf(r.placeholder[0])&&(a="01"+r.separator);var o=r.regex.val2(r.separator).test(a+e);if(!i&&!o&&(e.charAt(1)===r.separator||-1!=="-./".indexOf(e.charAt(1)))&&(o=r.regex.val2(r.separator).test(a+"0"+e.charAt(0))))return t.buffer[n-1]="0",{refreshFromBuffer:{start:n-1,end:n},pos:n,c:e.charAt(0)};if(r.mask.indexOf("2")===r.mask.length-1&&o){var s=t.buffer.join("").substr(4,4)+e;if(s!==r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return o},cardinality:2,prevalidator:[{validator:function(e,t,n,i,r){isNaN(t.buffer[n+1])||(e+=t.buffer[n+1]);var a=r.getFrontValue(t.mask,t.buffer,r);-1!==a.indexOf(r.placeholder[0])&&(a="01"+r.separator);var o=1===e.length?r.regex.val2pre(r.separator).test(a+e):r.regex.val2(r.separator).test(a+e);return i||o||!(o=r.regex.val2(r.separator).test(a+"0"+e))?o:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},y:{validator:function(e,t,n,i,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var a=t.buffer.join("").substr(0,6);if(a!==r.leapday)return!0;var o=parseInt(e,10);return o%4===0?o%100===0?o%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,n,i,r){var a=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!a){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(a=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[n++]=o.charAt(0),{pos:n};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),a=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[n++]=o.charAt(0),t.buffer[n++]=o.charAt(1),{pos:n}}return a},cardinality:1},{validator:function(e,t,n,i,r){var a=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!a){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(a=r.isInYearRange(e[0]+o[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[n++]=o.charAt(1),{pos:n};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!==r.leapday)a=!0;else{var l=parseInt(e,10);a=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else a=!1;if(a)return t.buffer[n-1]=o.charAt(0),t.buffer[n++]=o.charAt(1),t.buffer[n++]=e.charAt(0),{refreshFromBuffer:{start:n-3,end:n},pos:n}}return a},cardinality:2},{validator:function(e,t,n,i,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[13-9]|1[012])"+n+"[0-3])|(02"+n+"[0-2])")},val2:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+n+"30)|((0[13578]|1[02])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(n,i,r,a){var o=e(this);if(n.ctrlKey&&n.keyCode===t.keyCode.RIGHT){var s=new Date;o.val((s.getMonth()+1).toString()+s.getDate().toString()+s.getFullYear().toString()),o.trigger("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(n,i,r,a){var o=e(this);if(n.ctrlKey&&n.keyCode===t.keyCode.RIGHT){var s=new Date;o.val(s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString()),o.trigger("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,n,i,r){if("24"===r.hourFormat&&24===parseInt(e,10))return t.buffer[n-1]="0",t.buffer[n]="0",{refreshFromBuffer:{start:n-1,end:n},c:"0"};var a=r.regex.hrs.test(e);if(!i&&!a&&(e.charAt(1)===r.timeseparator||-1!=="-.:".indexOf(e.charAt(1)))&&(a=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[n-1]="0",t.buffer[n]=e.charAt(0),n++,{refreshFromBuffer:{start:n-2,end:n},pos:n,c:r.timeseparator};if(a&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var o=parseInt(e,10);return 24===o?(t.buffer[n+5]="a",t.buffer[n+6]="m"):(t.buffer[n+5]="p",t.buffer[n+6]="m"),o-=12,10>o?(t.buffer[n]=o.toString(),t.buffer[n-1]="0"):(t.buffer[n]=o.toString().charAt(1),t.buffer[n-1]=o.toString().charAt(0)),{refreshFromBuffer:{start:n-1,end:n+6},c:t.buffer[n]}}return a},cardinality:2,prevalidator:[{validator:function(e,t,n,i,r){var a=r.regex.hrspre.test(e);return i||a||!(a=r.regex.hrs.test("0"+e))?a:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,n,i,r){var a=r.regex.mspre.test(e);return i||a||!(a=r.regex.ms.test("0"+e))?a:(t.buffer[n]="0",n++,{pos:n})},cardinality:1}]},t:{validator:function(e,t,n,i,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"mm/dd/yyyy hh:mm xm":{mask:"1/2/y h:s t\\m",placeholder:"mm/dd/yyyy hh:mm xm",alias:"datetime12",regex:{val2pre:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[13-9]|1[012])"+n+"[0-3])|(02"+n+"[0-2])")},val2:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+n+"30)|((0[13578]|1[02])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(n,i,r,a){var o=e(this);if(n.ctrlKey&&n.keyCode===t.keyCode.RIGHT){var s=new Date;o.val((s.getMonth()+1).toString()+s.getDate().toString()+s.getFullYear().toString()),o.trigger("setvalue.inputmask")}}},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"},shamsi:{regex:{val2pre:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+n+"[0-3])")},val2:function(e){var n=t.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[1-9]|1[012])"+n+"30)|((0[1-6])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},yearrange:{minyear:1300,maxyear:1499},mask:"y/1/2",leapday:"/12/30",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",clearIncomplete:!0}}),t}(jQuery,Inputmask),function(e,t){return t.extendDefinitions({A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}}),t.extendAliases({url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,n,i,r){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,n=0;t>n;n++)e[n]=function(){var e=n;return{validator:function(t,n,i,r,a){if(a.regex["urlpre"+(e+1)]){var o,s=t;e+1-t.length>0&&(s=n.buffer.join("").substring(0,e+1-t.length)+""+s);var l=a.regex["urlpre"+(e+1)].test(s);if(!r&&!l){for(i-=e,o=0;o<a.defaultPrefix.length;o++)n.buffer[i]=a.defaultPrefix[o],i++;for(o=0;o<s.length-1;o++)n.buffer[i]=s[o],i++;return{pos:i}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,n,i,r){return n-1>-1&&"."!==t.buffer[n-1]?(e=t.buffer[n-1]+e,e=n-2>-1&&"."!==t.buffer[n-2]?t.buffer[n-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}},onUnMask:function(e,t,n){return e}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}},onUnMask:function(e,t,n){return e}},mac:{mask:"##:##:##:##:##:##"}}),t}(jQuery,Inputmask),function(e,t){return t.extendAliases({numeric:{mask:function(e){function t(t){for(var n="",i=0;i<t.length;i++)n+=e.definitions[t.charAt(i)]?"\\"+t.charAt(i):t.charAt(i);return n}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator===e.radixPoint&&("."===e.radixPoint?e.groupSeparator=",":","===e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!==e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var n=Math.floor(e.integerDigits/e.groupSize),i=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0===i?n-1:n),e.integerDigits<1&&(e.integerDigits="*")}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&""!==e.placeholder&&e.integerOptional===!0,
e.definitions[";"]=e.definitions["~"],e.definitions[";"].definitionSymbol="~",e.numericInput===!0&&(e.radixFocus=!1,e.digitsOptional=!1,isNaN(e.digits)&&(e.digits=2),e.decimalProtect=!1);var r=t(e.prefix);return r+="[+]",r+=e.integerOptional===!0?"~{1,"+e.integerDigits+"}":"~{"+e.integerDigits+"}",void 0!==e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(r+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{1,"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!==e.negationSymbol.back&&(r+="[-]"),r+=t(e.suffix),e.greedy=!1,r},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",radixFocus:!0,groupSize:3,groupSeparator:"",autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,postFormat:function(n,i,r,a){a.numericInput===!0&&(n=n.reverse(),isFinite(i)&&(i=n.join("").length-i-1));var o,s,l=!1;n.length>=a.suffix.length&&n.join("").indexOf(a.suffix)===n.length-a.suffix.length&&(n.length=n.length-a.suffix.length,l=!0),i=i>=n.length?n.length-1:i<a.prefix.length?a.prefix.length:i;var u=!1,c=n[i];if(""===a.groupSeparator||a.numericInput!==!0&&-1!==e.inArray(a.radixPoint,n)&&i>e.inArray(a.radixPoint,n)||new RegExp("["+t.escapeRegex(a.negationSymbol.front)+"+]").test(c)){if(l)for(o=0,s=a.suffix.length;s>o;o++)n.push(a.suffix.charAt(o));return{pos:i}}var p=n.slice();c===a.groupSeparator&&(p.splice(i--,1),c=p[i]),r?c!==a.radixPoint&&(p[i]="?"):p.splice(i,0,"?");var d=p.join(""),f=d;if(d.length>0&&a.autoGroup||r&&-1!==d.indexOf(a.groupSeparator)){var m=t.escapeRegex(a.groupSeparator);u=0===d.indexOf(a.groupSeparator),d=d.replace(new RegExp(m,"g"),"");var h=d.split(a.radixPoint);if(d=""===a.radixPoint?d:h[0],d!==a.prefix+"?0"&&d.length>=a.groupSize+a.prefix.length)for(var v=new RegExp("([-+]?[\\d?]+)([\\d?]{"+a.groupSize+"})");v.test(d);)d=d.replace(v,"$1"+a.groupSeparator+"$2"),d=d.replace(a.groupSeparator+a.groupSeparator,a.groupSeparator);""!==a.radixPoint&&h.length>1&&(d+=a.radixPoint+h[1])}for(u=f!==d,n.length=d.length,o=0,s=d.length;s>o;o++)n[o]=d.charAt(o);var g=e.inArray("?",n);if(-1===g&&c===a.radixPoint&&(g=e.inArray(a.radixPoint,n)),r?n[g]=c:n.splice(g,1),!u&&l)for(o=0,s=a.suffix.length;s>o;o++)n.push(a.suffix.charAt(o));return g=a.numericInput&&isFinite(i)?n.join("").length-g-1:g,a.numericInput&&(n=n.reverse(),e.inArray(a.radixPoint,n)<g&&n.join("").length-a.suffix.length!==g&&(g-=1)),{pos:g,refreshFromBuffer:u,buffer:n}},onBeforeWrite:function(n,i,r,a){if(n&&("blur"===n.type||"checkval"===n.type)){var o=i.join(""),s=o.replace(a.prefix,"");if(s=s.replace(a.suffix,""),s=s.replace(new RegExp(t.escapeRegex(a.groupSeparator),"g"),""),","===a.radixPoint&&(s=s.replace(t.escapeRegex(a.radixPoint),".")),isFinite(s)&&isFinite(a.min)&&parseFloat(s)<parseFloat(a.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(a.prefix+a.min).split("")},a.postFormat((a.prefix+a.min).split(""),0,!0,a));if(a.numericInput!==!0){var l=""!==a.radixPoint?i.join("").split(a.radixPoint):[i.join("")],u=l[0].match(a.regex.integerPart(a)),c=2===l.length?l[1].match(a.regex.integerNPart(a)):void 0;if(u){u[0]!==a.negationSymbol.front+"0"&&u[0]!==a.negationSymbol.front&&"+"!==u[0]||void 0!==c&&!c[0].match(/^0+$/)||i.splice(u.index,1);var p=e.inArray(a.radixPoint,i);if(-1!==p){if(isFinite(a.digits)&&!a.digitsOptional){for(var d=1;d<=a.digits;d++)(void 0===i[p+d]||i[p+d]===a.placeholder.charAt(0))&&(i[p+d]="0");return{refreshFromBuffer:o!==i.join(""),buffer:i}}if(p===i.length-a.suffix.length-1)return i.splice(p,1),{refreshFromBuffer:!0,buffer:i}}}}}if(a.autoGroup){var f=a.postFormat(i,a.numericInput?r:r-1,!0,a);return f.caret=r<=a.prefix.length?f.pos:f.pos+1,f}},regex:{integerPart:function(e){return new RegExp("["+t.escapeRegex(e.negationSymbol.front)+"+]?\\d+")},integerNPart:function(e){return new RegExp("[\\d"+t.escapeRegex(e.groupSeparator)+"]+")}},signHandler:function(e,t,n,i,r){if(!i&&r.allowMinus&&"-"===e||r.allowPlus&&"+"===e){var a=t.buffer.join("").match(r.regex.integerPart(r));if(a&&a[0].length>0)return t.buffer[a.index]===("-"===e?"+":r.negationSymbol.front)?"-"===e?""!==r.negationSymbol.back?{pos:a.index,c:r.negationSymbol.front,remove:a.index,caret:n,insert:{pos:t.buffer.length-r.suffix.length-1,c:r.negationSymbol.back}}:{pos:a.index,c:r.negationSymbol.front,remove:a.index,caret:n}:""!==r.negationSymbol.back?{pos:a.index,c:"+",remove:[a.index,t.buffer.length-r.suffix.length-1],caret:n}:{pos:a.index,c:"+",remove:a.index,caret:n}:t.buffer[a.index]===("-"===e?r.negationSymbol.front:"+")?"-"===e&&""!==r.negationSymbol.back?{remove:[a.index,t.buffer.length-r.suffix.length-1],caret:n-1}:{remove:a.index,caret:n-1}:"-"===e?""!==r.negationSymbol.back?{pos:a.index,c:r.negationSymbol.front,caret:n+1,insert:{pos:t.buffer.length-r.suffix.length,c:r.negationSymbol.back}}:{pos:a.index,c:r.negationSymbol.front,caret:n+1}:{pos:a.index,c:e,caret:n+1}}return!1},radixHandler:function(t,n,i,r,a){if(!r&&(-1!==e.inArray(t,[",","."])&&(t=a.radixPoint),t===a.radixPoint&&void 0!==a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0))){var o=e.inArray(a.radixPoint,n.buffer),s=n.buffer.join("").match(a.regex.integerPart(a));if(-1!==o&&n.validPositions[o])return n.validPositions[o-1]?{caret:o+1}:{pos:s.index,c:s[0],caret:o+1};if(!s||"0"===s[0]&&s.index+1!==i)return n.buffer[s?s.index:i]="0",{pos:(s?s.index:i)+1,c:a.radixPoint}}return!1},leadingZeroHandler:function(t,n,i,r,a){if(a.numericInput===!0){if("0"===n.buffer[n.buffer.length-a.prefix.length-1])return{pos:i,remove:n.buffer.length-a.prefix.length-1}}else{var o=n.buffer.join("").match(a.regex.integerNPart(a)),s=e.inArray(a.radixPoint,n.buffer);if(o&&!r&&(-1===s||s>=i))if(0===o[0].indexOf("0")){i<a.prefix.length&&(i=o.index);var l=e.inArray(a.radixPoint,n._buffer),u=n._buffer&&n.buffer.slice(s).join("")===n._buffer.slice(l).join("")||0===parseInt(n.buffer.slice(s+1).join("")),c=n._buffer&&n.buffer.slice(o.index,s).join("")===n._buffer.slice(a.prefix.length,l).join("")||"0"===n.buffer.slice(o.index,s).join("");if(-1===s||u&&c)return n.buffer.splice(o.index,1),i=i>o.index?i-1:o.index,{pos:i,remove:o.index};if(o.index+1===i||"0"===t)return n.buffer.splice(o.index,1),i=o.index,{pos:i,remove:o.index}}else if("0"===t&&i<=o.index&&o[0]!==a.groupSeparator)return!1}return!0},postValidation:function(n,i){var r=!0,a=n.join(""),o=a.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(t.escapeRegex(i.radixPoint),".")),o=o.replace(new RegExp("^"+t.escapeRegex(i.negationSymbol.front)),"-"),o=o.replace(new RegExp(t.escapeRegex(i.negationSymbol.back)+"$"),""),o=o===i.negationSymbol.front?o+"0":o,isFinite(o)&&(null!==i.max&&isFinite(i.max)&&(r=parseFloat(o)<=parseFloat(i.max)),r&&null!==i.min&&isFinite(i.min)&&(0>=o||o.toString().length>=i.min.toString().length)&&(r=parseFloat(o)>=parseFloat(i.min),r||(r=e.extend(!0,{refreshFromBuffer:!0,buffer:(i.prefix+i.min).split("")},i.postFormat((i.prefix+i.min).split(""),0,!0,i)),r.refreshFromBuffer=!0))),r},definitions:{"~":{validator:function(n,i,r,a,o){var s=o.signHandler(n,i,r,a,o);if(!s&&(s=o.radixHandler(n,i,r,a,o),!s&&(s=a?new RegExp("[0-9"+t.escapeRegex(o.groupSeparator)+"]").test(n):new RegExp("[0-9]").test(n),s===!0&&(s=o.leadingZeroHandler(n,i,r,a,o),s===!0)))){var l=e.inArray(o.radixPoint,i.buffer);s=-1!==l&&o.digitsOptional===!1&&o.numericInput!==!0&&r>l&&!a?{pos:r,remove:r}:{pos:r}}return s},cardinality:1,prevalidator:null},"+":{validator:function(e,t,n,i,r){var a=r.signHandler(e,t,n,i,r);return!a&&(i&&r.allowMinus&&e===r.negationSymbol.front||r.allowMinus&&"-"===e||r.allowPlus&&"+"===e)&&(a="-"===e?""!==r.negationSymbol.back?{pos:n,c:"-"===e?r.negationSymbol.front:"+",caret:n+1,insert:{pos:t.buffer.length,c:r.negationSymbol.back}}:{pos:n,c:"-"===e?r.negationSymbol.front:"+",caret:n+1}:!0),a},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,n,i,r){var a=r.signHandler(e,t,n,i,r);return!a&&i&&r.allowMinus&&e===r.negationSymbol.back&&(a=!0),a},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(e,n,i,r,a){var o=a.signHandler(e,n,i,r,a);if(!o){var s="["+t.escapeRegex(a.radixPoint)+",\\.]";o=new RegExp(s).test(e),o&&n.validPositions[i]&&n.validPositions[i].match.placeholder===a.radixPoint&&(o={caret:i+1})}return o?{c:a.radixPoint}:o},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},onUnMask:function(e,n,i){var r=e.replace(i.prefix,"");return r=r.replace(i.suffix,""),r=r.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),i.unmaskAsNumber?(""!==i.radixPoint&&-1!==r.indexOf(i.radixPoint)&&(r=r.replace(t.escapeRegex.call(this,i.radixPoint),".")),Number(r)):r},isComplete:function(e,n){var i=e.join(""),r=e.slice();if(n.postFormat(r,0,!0,n),r.join("")!==i)return!1;var a=i.replace(n.prefix,"");return a=a.replace(n.suffix,""),a=a.replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),","===n.radixPoint&&(a=a.replace(t.escapeRegex(n.radixPoint),".")),isFinite(a)},onBeforeMask:function(e,n){if(""!==n.radixPoint&&isFinite(e))e=e.toString().replace(".",n.radixPoint);else{var i=e.match(/,/g),r=e.match(/\./g);r&&i?r.length>i.length?(e=e.replace(/\./g,""),e=e.replace(",",n.radixPoint)):i.length>r.length?(e=e.replace(/,/g,""),e=e.replace(".",n.radixPoint)):e=e.indexOf(".")<e.indexOf(",")?e.replace(/\./g,""):e=e.replace(/,/g,""):e=e.replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),"")}if(0===n.digits&&(-1!==e.indexOf(".")?e=e.substring(0,e.indexOf(".")):-1!==e.indexOf(",")&&(e=e.substring(0,e.indexOf(",")))),""!==n.radixPoint&&isFinite(n.digits)&&-1!==e.indexOf(n.radixPoint)){var a=e.split(n.radixPoint),o=a[1].match(new RegExp("\\d*"))[0];if(parseInt(n.digits)<o.toString().length){var s=Math.pow(10,parseInt(n.digits));e=e.replace(t.escapeRegex(n.radixPoint),"."),e=Math.round(parseFloat(e)*s)/s,e=e.toString().replace(".",n.radixPoint)}}return e.toString()},canClearPosition:function(n,i,r,a,o){var s=n.validPositions[i].input,l=s!==o.radixPoint||null!==n.validPositions[i].match.fn&&o.decimalProtect===!1||isFinite(s)||i===r||s===o.groupSeparator||s===o.negationSymbol.front||s===o.negationSymbol.back;if(l&&isFinite(s)){var u,c=e.inArray(o.radixPoint,n.buffer),p=!1;if(void 0===n.validPositions[c]&&(n.validPositions[c]={input:o.radixPoint},p=!0),!a&&n.buffer){u=n.buffer.join("").substr(0,i).match(o.regex.integerNPart(o));var d=i+1,f=null==u||0===parseInt(u[0].replace(new RegExp(t.escapeRegex(o.groupSeparator),"g"),""));if(f)for(;n.validPositions[d]&&(n.validPositions[d].input===o.groupSeparator||"0"===n.validPositions[d].input);)delete n.validPositions[d],d++}var m=[];for(var h in n.validPositions)void 0!==n.validPositions[h].input&&m.push(n.validPositions[h].input);if(p&&delete n.validPositions[c],c>0){var v=m.join("");if(u=v.match(o.regex.integerNPart(o)))if(c>=i)if(0===u[0].indexOf("0"))l=u.index!==i||"0"===o.placeholder;else{var g=parseInt(u[0].replace(new RegExp(t.escapeRegex(o.groupSeparator),"g"),"")),y=parseInt(v.split(o.radixPoint)[1]);10>g&&n.validPositions[i]&&("0"!==o.placeholder||y>0)&&(n.validPositions[i].input="0",n.p=o.prefix.length+1,l=!1)}else 0===u[0].indexOf("0")&&3===v.length&&(n.validPositions={},l=!1)}}return l},onKeyDown:function(n,i,r,a){var o=e(this);if(n.ctrlKey)switch(n.keyCode){case t.keyCode.UP:o.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(a.step)),o.trigger("setvalue.inputmask");break;case t.keyCode.DOWN:o.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(a.step)),o.trigger("setvalue.inputmask")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowPlus:!1,allowMinus:!1}}),t}(jQuery,Inputmask),function(e,t){return t.extendAliases({phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(t){t.definitions["#"]=t.definitions[9];var n=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){n=e},error:function(e,n,i){alert(i+" - "+t.url)}}),n=n.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1})},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var n=e.replace(/^0/g,"");return(n.indexOf(t.countrycode)>1||-1===n.indexOf(t.countrycode))&&(n="+"+t.countrycode+n),n}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),t}(jQuery,Inputmask),function(e,t){return t.extendAliases({Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,n,i,r,a){function o(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,n=new o,i=[];for(a.regexTokens=[];e=a.tokenizer.exec(a.regex);)switch(t=e[0],t.charAt(0)){case"(":i.push(new o(!0));break;case")":u=i.pop(),i.length>0?i[i.length-1].matches.push(u):n.matches.push(u);break;case"{":case"+":case"*":var r=new o(!1,!0);t=t.replace(/[{}]/g,"");var s=t.split(","),l=isNaN(s[0])?s[0]:parseInt(s[0]),c=1===s.length?l:isNaN(s[1])?s[1]:parseInt(s[1]);if(r.quantifier={min:l,max:c},i.length>0){var p=i[i.length-1].matches;e=p.pop(),e.isGroup||(u=new o(!0),u.matches.push(e),e=u),p.push(e),p.push(r)}else e=n.matches.pop(),e.isGroup||(u=new o(!0),u.matches.push(e),e=u),n.matches.push(e),n.matches.push(r);break;default:i.length>0?i[i.length-1].matches.push(t):n.matches.push(t)}n.matches.length>0&&a.regexTokens.push(n)}function l(t,n){var i=!1;n&&(p+="(",f++);for(var r=0;r<t.matches.length;r++){var a=t.matches[r];if(a.isGroup===!0)i=l(a,!0);else if(a.isQuantifier===!0){var o=e.inArray(a,t.matches),s=t.matches[o-1],u=p;if(isNaN(a.quantifier.max)){for(;a.repeaterPart&&a.repeaterPart!==p&&a.repeaterPart.length>p.length&&!(i=l(s,!0)););i=i||l(s,!0),i&&(a.repeaterPart=p),p=u+a.quantifier.max}else{for(var c=0,d=a.quantifier.max-1;d>c&&!(i=l(s,!0));c++);p=u+"{"+a.quantifier.min+","+a.quantifier.max+"}"}}else if(void 0!==a.matches)for(var h=0;h<a.length&&!(i=l(a[h],n));h++);else{var v;if("["==a.charAt(0)){v=p,v+=a;for(var g=0;f>g;g++)v+=")";var y=new RegExp("^("+v+")$");i=y.test(m)}else for(var k=0,w=a.length;w>k;k++)if("\\"!==a.charAt(k)){v=p,v+=a.substr(0,k+1),v=v.replace(/\|$/,"");for(var g=0;f>g;g++)v+=")";var y=new RegExp("^("+v+")$");if(i=y.test(m))break}p+=a}if(i)break}return n&&(p+=")",f--),i}var u,c=n.buffer.slice(),p="",d=!1,f=0;null===a.regexTokens&&s(),c.splice(i,0,t);for(var m=c.join(""),h=0;h<a.regexTokens.length;h++){var v=a.regexTokens[h];if(d=l(v,v.isGroup))break}return d},cardinality:1}}}}),t}(jQuery,Inputmask),define("jquery.inputmask",function(){}),define("bindings.inputmask",["backbone","backbone.stickit","jquery.inputmask"],function(){return Backbone.Stickit.addHandler({selector:"input[data-inputmask]",initialize:function(e,t,n){var i;return i=_.defaults({},n.defaultOptions,{rightAlign:!1}),e.inputmask(n.inputFilter,i)},destroy:function(e,t,n){}})}),window.JST||(window.JST={}),window.JST["car/create/templates/layout"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="ui divided grid">\n  <!-- Header of page -->\n  <div id="header-region" class="one column row"></div>\n\n  <div class="row">\n    <!-- Help region -->\n    <div class="six wide column">\n      <div id="help-region" class="ui basic segment"></div>\n    </div>\n\n    <!-- Form region -->\n    <div class="ten wide column">\n      <div id="form-region" class="ui basic segment"></div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/create/templates/layout",function(){}),window.JST||(window.JST={}),window.JST["car/create/templates/header"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="ui basic segment">\n  <h1 class="ui dividing header">\n    Добавить новый автомобиль\n  </h1>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/create/templates/header",function(){}),window.JST||(window.JST={}),window.JST["car/create/templates/help"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="item">\n  <i class="asterisk large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Обязательное поле\n    </div>\n    <div class="description">\n      Поля помеченные звездочкой обязательны к заполнению\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="money large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Стоимость\n    </div>\n    <div class="description">\n      Значение стоимости автомобиля может варьировться 0.01 до 999999. Максимальное\n      число знаков после запятой 2\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="calendar large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Год выпуска\n    </div>\n    <div class="description">\n      Допустимые значения года выпуска автомобиля от 1900 до '),n.push(i(moment().year())),n.push('\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="picture large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Фото\n    </div>\n    <div class="description">\n      В качестве фото возможно использовать только внешние ссылки. Количество фотографий не ограничено\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/create/templates/help",function(){}),window.JST||(window.JST={}),window.JST["car/create/templates/form"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="required field">\n  <label for="model">Модель автомобиля</label>\n  <div class="ui input">\n    <input type="text" id="model" name="model"\n      placeholder="Пример: ВАЗ">\n  </div>\n</div>\n\n<div class="fields">\n  <div class="required eight wide field">\n    <label for="price">Стоимость автомобиля</label>\n    <div class="ui labeled input">\n      <div class="ui left icon input">\n        <input type="text" id="price" name="price"\n          placeholder="0.00"\n          data-inputmask="\'numeric\': true, \'digits\': 2, \'min\': 0, \'max\': 100000, \'allowPlus\': false, \'allowMinus\': false">\n        <i class="dollar icon"></i>\n      </div>\n    </div>\n  </div>\n  <div class="required eight wide field">\n    <label for="year">Год выпуска</label>\n    <div class="ui left icon input">\n      <input type="text" id="year" name="year"\n        placeholder="Пример: 2001"\n        data-inputmask="\'alias\': \'numeric\', \'digits\': 0, \'min\': 1900, \'max\': '),n.push(i(moment().year())),n.push(', \'allowPlus\': false, \'allowMinus\': false">\n      <i class="clock icon"></i>\n    </div>\n  </div>\n</div>\n\n<div class="required field">\n  <label for="description">Описание</label>\n  <textarea id="description" name="description" rows="6"\n    placeholder="Пример: состояние отличное, не бит, не крашен"></textarea>\n</div>\n\n<div class="field">\n  <label for="photo">Фотографии</label>\n  <div class="ui special four cards"></div>\n  <div class="ui hidden divider"></div>\n  <div class="ui action fluid input">\n    <input type="text" id="photo" name="photo" placeholder="Пример: http://placehold.it/128x128.png">\n    <a href="javascript:void(null);" class="add-photo ui icon red button">\n      <i class="plus icon"></i>\n    </a>\n  </div>\n</div>\n\n<!-- Form submit -->\n<div class="ui basic segment center aligned field">\n  <a href="javascript:void(null);" class="ui cancel button">Отмена</a>\n  <button type="submit" class="ui submit red button">Сохранить</button>\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/create/templates/form",function(){}),window.JST||(window.JST={}),window.JST["car/create/templates/photo"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="blurring dimmable image">\n  <div class="ui dimmer">\n    <div class="content">\n      <div class="center">\n        <a href="javascript:void(null);" class="remove ui inverted red icon button">\n          <i class="trash icon"></i>\n        </a>\n      </div>\n    </div>\n  </div>\n  <img src="'),n.push(i(this.url)),n.push('">\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/create/templates/photo",function(){});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/create/create_view",["app/app","base.views","bindings.inputmask","./templates/layout","./templates/header","./templates/help","./templates/form","./templates/photo"],function(){var e,t;return e=require("app/app"),t=require("base.views"),e.module("Car.Create",function(e,n,i,r,a,o){return e.Layout=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/create/templates/layout",t.prototype.className="ui container",t.prototype.regions={headerRegion:"#header-region",helpRegion:"#help-region",formRegion:"#form-region"},t}(t.LayoutView),e.Header=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/create/templates/header",t.prototype.className="column",t}(t.ItemView),e.Help=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/create/templates/help",t.prototype.className="ui very relaxed list",t}(t.ItemView),e.Photo=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/create/templates/photo",t.prototype.className="card",t.prototype.ui={removeBtn:"a.remove"},t.prototype.triggers={"click @ui.removeBtn":"remove"},t.prototype.onShow=function(){return this.$(".image").dimmer({on:"hover"})},t}(t.ItemView),e.Form=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template="car/create/templates/form",n.prototype.tagName="form",n.prototype.className="ui form",n.prototype.ui={inputPhotoUrl:"[name=photo]",addPhotoBtn:"a.add-photo",cancelBtn:"a.cancel"},n.prototype.childView=e.Photo,n.prototype.childViewEventPrefix="car:photo",n.prototype.childViewContainer=".cards",n.prototype.triggers={submit:"submit","click @ui.cancelBtn":"cancel"},n.prototype.events={"click @ui.addPhotoBtn":"addPhoto"},n.prototype.bindings={"[name=model]":{observe:"model"},"[name=price]":{observe:"price",inputFilter:"numeric"},"[name=year]":{observe:"year",inputFilter:"numeric"},"[name=description]":{observe:"description"}},n.prototype.addPhoto=function(e){var t;return e.preventDefault(),e.stopPropagation(),(t=this.ui.inputPhotoUrl.val())?(this.model.get("photos").add({url:t}),this.ui.inputPhotoUrl.val("")):void 0},n}(t.CompositeView)})});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/create/create_controller",["app/app","base.controllers","./create_view"],function(e){return e.module("Car.Create",function(e,t,n,i,r,a){return e.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,n),i.prototype.initialize=function(e){var n;return this.region=e.region,this.layout=this.getLayoutView(),n=t.reqres.request("car:entity:new"),this.layout.on("before:show",function(e){return function(){return e.getHeaderView(),e.getHelpView(),e.getFormView(n)}}(this)),this.region.show(this.layout)},i.prototype.getLayoutView=function(){return new e.Layout},i.prototype.getHeaderView=function(){var t;return t=new e.Header,this.layout.showChildView("headerRegion",t)},i.prototype.getHelpView=function(){var t;return t=new e.Help,this.layout.showChildView("helpRegion",t)},i.prototype.getFormView=function(n){var i;return i=new e.Form({model:n,collection:n.get("photos")}),i.on("submit",function(e){var n,r;return i=e.view,r=e.model,n=e.collection,t.commands.execute("car:entity:create",r)}),i.on("cancel",function(e){var t,n;return n=e.model,t=e.collection,i=e.view,window.history.back()}),i.on("car:photo:remove",function(e,t){var i,r;return e=t.view,r=t.model,i=t.collection,n.get("photos").remove(r)}),this.layout.showChildView("formRegion",i)},i}(t.Controllers.Base)}),e.Car.Create.Controller}),window.JST||(window.JST={}),window.JST["car/show/templates/layout"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div id="header-region"></div>\n\n<div id="description-region"></div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/show/templates/layout",function(){}),window.JST||(window.JST={}),window.JST["car/show/templates/header"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h1 class="ui dividing header">\n  '),n.push(i(this.model)),n.push(" ("),n.push(i(this.year)),n.push(' г.)\n  <div class="sub header">\n    <div class="ui link horizontal list">\n      <a href="#!/car/'),n.push(i(this.id)),n.push('/edit" class="item">\n        <i class="edit icon"></i>\n        Редактировать\n      </a>\n      <a href="javascript:void(null);" class="delete item">\n        <i class="trash icon"></i>\n        Удалить\n      </a>\n    </div>\n  </div>\n</h1>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/show/templates/header",function(){}),window.JST||(window.JST={}),window.JST["car/show/templates/description"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,t,r,a;for(n.push('<div class="ui small statistics">\n  <div class="statistic">\n    <div class="value">\n      '),n.push(i(this.year)),n.push('\n    </div>\n    <div class="label">\n      Год выпуска\n    </div>\n  </div>\n\n  <div class="statistic">\n    <div class="value">\n      <i class="dollar icon"></i> '),n.push(i(this.price)),n.push('\n    </div>\n    <div class="label">\n      Стоимость\n    </div>\n  </div>\n</div>\n\n<div class="ui hidden divider"></div>\n\n<p>\n  '),n.push(i(this.description)),n.push('\n</p>\n\n<div class="ui four cards">\n  '),a=this.photos,e=0,t=a.length;t>e;e++)r=a[e],n.push('\n  <div class="card">\n    <div class="image">\n      <img src="'),n.push(i(r.url)),n.push('" alt="">\n    </div>\n  </div>\n  ');n.push("\n</div>\n")}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/show/templates/description",function(){});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/show/show_view",["app/app","base.views","./templates/layout","./templates/header","./templates/description"],function(){var e,t;return e=require("app/app"),t=require("base.views"),e.module("Car.Show",function(e,n,i,r,a,o){return e.Layout=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/show/templates/layout",t.prototype.className="ui container",t.prototype.regions={headerRegion:"#header-region",descriptionRegion:"#description-region"},t}(t.LayoutView),e.Header=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/show/templates/header",t.prototype.className="ui basic segment",t.prototype.ui={destroyBtn:"a.delete"},t.prototype.triggers={"click @ui.destroyBtn":"car:delete"},t}(t.ItemView),e.Description=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/show/templates/description",t.prototype.className="ui basic segment",t}(t.ItemView)})});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/show/show_controller",["app/app","base.controllers","./show_view"],function(e){return e.module("Car.Show",function(e,t,n,i,r,a){return e.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,n),i.prototype.initialize=function(e){var n,i;return i=e.id,this.region=e.region,this.layout=this.getLayoutView(),n=t.reqres.request("car:entity",i),this.layout.on("before:show",function(e){return function(){return e.getHeaderView(n),e.getDescriptionView(n)}}(this)),this.region.show(this.layout)},i.prototype.getLayoutView=function(){return new e.Layout},i.prototype.getHeaderView=function(n){var i;return i=new e.Header({
model:n}),i.on("car:delete",function(e){var n,r;return r=e.model,n=e.collection,i=e.view,t.commands.execute("car:entity:destroy",r)}),this.layout.showChildView("headerRegion",i)},i.prototype.getDescriptionView=function(t){var n;return n=new e.Description({model:t}),this.layout.showChildView("descriptionRegion",n)},i}(t.Controllers.Base)}),e.Car.Show.Controller}),window.JST||(window.JST={}),window.JST["car/edit/templates/layout"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="ui divided grid">\n  <!-- Header of page -->\n  <div id="header-region" class="one column row"></div>\n\n  <div class="row">\n    <!-- Help region -->\n    <div class="six wide column">\n      <div id="help-region" class="ui basic segment"></div>\n    </div>\n\n    <!-- Form region -->\n    <div class="ten wide column">\n      <div id="form-region" class="ui basic segment"></div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/edit/templates/layout",function(){}),window.JST||(window.JST={}),window.JST["car/edit/templates/header"]=function(e){e||(e={});var t,n=[],i=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="ui basic segment">\n  <h1 class="ui dividing header">\n    Добавить новый автомобиль\n  </h1>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=r,n.join("")},define("app/modules/car/edit/templates/header",function(){}),window.JST||(window.JST={}),window.JST["car/edit/templates/help"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="item">\n  <i class="asterisk large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Обязательное поле\n    </div>\n    <div class="description">\n      Поля помеченные звездочкой обязательны к заполнению\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="money large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Стоимость\n    </div>\n    <div class="description">\n      Значение стоимости автомобиля может варьировться 0.01 до 999999. Максимальное\n      число знаков после запятой 2\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="calendar large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Год выпуска\n    </div>\n    <div class="description">\n      Допустимые значения года выпуска автомобиля от 1900 до '),n.push(i(moment().year())),n.push('\n    </div>\n  </div>\n</div>\n\n<div class="item">\n  <i class="picture large grey icon"></i>\n  <div class="content">\n    <div class="header">\n      Фото\n    </div>\n    <div class="description">\n      В качестве фото возможно использовать только внешние ссылки. Количество фотографий не ограничено\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/edit/templates/help",function(){}),window.JST||(window.JST={}),window.JST["car/edit/templates/form"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="required field">\n  <label for="model">Модель автомобиля</label>\n  <div class="ui input">\n    <input type="text" id="model" name="model"\n      placeholder="Пример: ВАЗ">\n  </div>\n</div>\n\n<div class="fields">\n  <div class="required eight wide field">\n    <label for="price">Стоимость автомобиля</label>\n    <div class="ui labeled input">\n      <div class="ui left icon input">\n        <input type="text" id="price" name="price"\n          placeholder="0.00"\n          data-inputmask="\'numeric\': true, \'digits\': 2, \'min\': 0, \'max\': 100000, \'allowPlus\': false, \'allowMinus\': false">\n        <i class="dollar icon"></i>\n      </div>\n    </div>\n  </div>\n  <div class="required eight wide field">\n    <label for="year">Год выпуска</label>\n    <div class="ui left icon input">\n      <input type="text" id="year" name="year"\n        placeholder="Пример: 2001"\n        data-inputmask="\'alias\': \'numeric\', \'digits\': 0, \'min\': 1900, \'max\': '),n.push(i(moment().year())),n.push(', \'allowPlus\': false, \'allowMinus\': false">\n      <i class="clock icon"></i>\n    </div>\n  </div>\n</div>\n\n<div class="required field">\n  <label for="description">Описание</label>\n  <textarea id="description" name="description" rows="6"\n    placeholder="Пример: состояние отличное, не бит, не крашен"></textarea>\n</div>\n\n<div class="field">\n  <label for="photo">Фотографии</label>\n  <div class="ui special four cards"></div>\n  <div class="ui hidden divider"></div>\n  <div class="ui action fluid input">\n    <input type="text" id="photo" name="photo" placeholder="Пример: http://placehold.it/128x128.png">\n    <a href="javascript:void(null);" class="add-photo ui icon red button">\n      <i class="plus icon"></i>\n    </a>\n  </div>\n</div>\n\n<!-- Form submit -->\n<div class="ui basic segment center aligned field">\n  <a href="javascript:void(null);" class="ui cancel button">Отмена</a>\n  <button type="submit" class="ui submit red button">Сохранить</button>\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/edit/templates/form",function(){}),window.JST||(window.JST={}),window.JST["car/edit/templates/photo"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?a(e):""},r=e.safe,a=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},a||(a=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="blurring dimmable image">\n  <div class="ui dimmer">\n    <div class="content">\n      <div class="center">\n        <a href="javascript:void(null);" class="remove ui inverted red icon button">\n          <i class="trash icon"></i>\n        </a>\n      </div>\n    </div>\n  </div>\n  <img src="'),n.push(i(this.url)),n.push('">\n</div>\n')}).call(this)}.call(e),e.safe=r,e.escape=a,n.join("")},define("app/modules/car/edit/templates/photo",function(){});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/edit/edit_view",["app/app","base.views","bindings.inputmask","./templates/layout","./templates/header","./templates/help","./templates/form","./templates/photo"],function(){var e,t;return e=require("app/app"),t=require("base.views"),e.module("Car.Edit",function(e,n,i,r,a,o){return e.Layout=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/edit/templates/layout",t.prototype.className="ui container",t.prototype.regions={headerRegion:"#header-region",helpRegion:"#help-region",formRegion:"#form-region"},t}(t.LayoutView),e.Header=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/edit/templates/header",t.prototype.className="column",t}(t.ItemView),e.Help=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/edit/templates/help",t.prototype.className="ui very relaxed list",t}(t.ItemView),e.Photo=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.template="car/edit/templates/photo",t.prototype.className="card",t.prototype.ui={removeBtn:"a.remove"},t.prototype.triggers={"click @ui.removeBtn":"remove"},t.prototype.onShow=function(){return this.$(".image").dimmer({on:"hover"})},t}(t.ItemView),e.Form=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.template="car/edit/templates/form",n.prototype.tagName="form",n.prototype.className="ui form",n.prototype.ui={inputPhotoUrl:"[name=photo]",addPhotoBtn:"a.add-photo",cancelBtn:"a.cancel"},n.prototype.childView=e.Photo,n.prototype.childViewEventPrefix="car:photo",n.prototype.childViewContainer=".cards",n.prototype.triggers={submit:"submit","click @ui.cancelBtn":"cancel"},n.prototype.events={"click @ui.addPhotoBtn":"addPhoto"},n.prototype.bindings={"[name=model]":{observe:"model"},"[name=price]":{observe:"price",inputFilter:"numeric"},"[name=year]":{observe:"year",inputFilter:"numeric"},"[name=description]":{observe:"description"}},n.prototype.addPhoto=function(e){var t;return e.preventDefault(),e.stopPropagation(),(t=this.ui.inputPhotoUrl.val())?(this.model.get("photos").add({url:t}),this.ui.inputPhotoUrl.val("")):void 0},n}(t.CompositeView)})});var extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define("app/modules/car/edit/edit_controller",["app/app","base.controllers","./edit_view"],function(e){return e.module("Car.Edit",function(e,t,n,i,r,a){return e.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,n),i.prototype.initialize=function(e){var n,i;return i=e.id,this.region=e.region,this.layout=this.getLayoutView(),n=t.reqres.request("car:entity",i),this.layout.on("before:show",function(e){return function(){return e.getHeaderView(),e.getHelpView(),e.getFormView(n)}}(this)),this.region.show(this.layout)},i.prototype.getLayoutView=function(){return new e.Layout},i.prototype.getHeaderView=function(){var t;return t=new e.Header,this.layout.showChildView("headerRegion",t)},i.prototype.getHelpView=function(){var t;return t=new e.Help,this.layout.showChildView("helpRegion",t)},i.prototype.getFormView=function(n){var i;return i=new e.Form({model:n,collection:n.get("photos")}),i.on("submit",function(e){var n,r;return i=e.view,r=e.model,n=e.collection,t.commands.execute("car:entity:create",r)}),i.on("cancel",function(e){var t,n;return n=e.model,t=e.collection,i=e.view,window.history.back()}),i.on("car:photo:remove",function(e,t){var i,r;return e=t.view,r=t.model,i=t.collection,n.get("photos").remove(r)}),this.layout.showChildView("formRegion",i)},i}(t.Controllers.Base)}),e.Car.Edit.Controller});var slice=[].slice;define("app/modules/car/car_api",["app/app","./list/list_controller","./create/create_controller","./show/show_controller","./edit/edit_controller"],function(e){var t;return t={list:function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],new e.Car.List.Controller({region:e.mainRegion})},create:function(t){return null==t&&(t=""),new e.Car.Create.Controller({region:e.mainRegion})},edit:function(t,n){return null==n&&(n=""),new e.Car.Edit.Controller({id:t,region:e.mainRegion})},show:function(t,n){return null==n&&(n=""),new e.Car.Show.Controller({id:t,region:e.mainRegion})}}});