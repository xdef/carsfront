var extend=function(e,t){function o(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define(["app/app","base.controllers","./home_view"],function(e){return e.module("Pages.Home",function(e,t,o,r,n,i){return e.Controller=function(o){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,o),r.prototype.initialize=function(e){var o;return this.region=e.region,this.layout=this.getLayoutView(),o=t.reqres.request("car:entities",{size:4}),this.layout.on("before:show",function(e){return function(){return e.getHeaderView(),t.commands.execute("when:fetched",o,function(){return e.getCarsView(o)})}}(this)),this.region.show(this.layout)},r.prototype.getLayoutView=function(){return new e.Layout},r.prototype.getHeaderView=function(){var t;return t=new e.Header,this.layout.showChildView("headerRegion",t)},r.prototype.getCarsView=function(o){var r;return r=new e.Cars({collection:o}),r.on("car:goto",function(e){var o,n;return n=e.model,o=e.collection,r=e.view,t.navigate("/car/"+n.id,{trigger:!0})}),r.on("car:populate",function(e){var o,n;return n=e.model,o=e.collection,r=e.view,t.commands.execute("car:entities:populate")}),this.layout.showChildView("carsRegion",r)},r}(t.Controllers.Base)}),e.Pages.Home.Controller});