define(['backbone', 'backbone.stickit', 'pikaday', 'moment'], function() {
  var Pikaday, moment;
  moment = require('moment');
  Pikaday = require('pikaday');
  return Backbone.Stickit.addHandler({
    selector: "input.datepicker",
    initialize: function($el, model, options) {
      var attr, date, defaults;
      defaults = _.extend({}, options.defaultOptions, {
        theme: 'semantic_ui',
        field: $el[0],
        format: "LL",
        firstDay: 1,
        container: $el.parents("div")[0],
        i18n: {
          months: moment.months(),
          weekdays: moment.weekdays(),
          weekdaysShort: moment.weekdaysShort()
        }
      });
      if (defaults.setDefaultDate && defaults.defaultDate) {
        date = moment(defaults.defaultDate).toISOString();
        attr = options.observe;
        model.set(attr, date);
      }
      return this.pikaday = new Pikaday(defaults);
    },
    onSet: function(val, options) {
      return moment(val, "LL").toISOString();
    },
    onGet: function(val, options) {
      return moment(val).format("LL");
    },
    destroy: function($el, model, options) {
      return this.pikaday.destroy();
    }
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9iYXNlL2JpbmRpbmdzL2RhdGVwaWNrZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQUEsQ0FBTyxDQUNMLFVBREssRUFFTCxrQkFGSyxFQUdMLFNBSEssRUFJTCxRQUpLLENBQVAsRUFLRyxTQUFBO0FBQ0QsTUFBQTtFQUFBLE1BQUEsR0FBUyxPQUFBLENBQVEsUUFBUjtFQUNULE9BQUEsR0FBVSxPQUFBLENBQVEsU0FBUjtTQUVWLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBakIsQ0FDRTtJQUFBLFFBQUEsRUFBVSxrQkFBVjtJQUVBLFVBQUEsRUFBWSxTQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWEsT0FBYjtBQUVWLFVBQUE7TUFBQSxRQUFBLEdBQVcsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsT0FBTyxDQUFDLGNBQXJCLEVBQ1Q7UUFBQSxLQUFBLEVBQU8sYUFBUDtRQUNBLEtBQUEsRUFBTyxHQUFJLENBQUEsQ0FBQSxDQURYO1FBRUEsTUFBQSxFQUFRLElBRlI7UUFHQSxRQUFBLEVBQVUsQ0FIVjtRQUlBLFNBQUEsRUFBVyxHQUFHLENBQUMsT0FBSixDQUFZLEtBQVosQ0FBbUIsQ0FBQSxDQUFBLENBSjlCO1FBS0EsSUFBQSxFQUNFO1VBQUEsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFQLENBQUEsQ0FBUjtVQUNBLFFBQUEsRUFBVSxNQUFNLENBQUMsUUFBUCxDQUFBLENBRFY7VUFFQSxhQUFBLEVBQWUsTUFBTSxDQUFDLGFBQVAsQ0FBQSxDQUZmO1NBTkY7T0FEUztNQVdYLElBQUcsUUFBUSxDQUFDLGNBQVQsSUFBNEIsUUFBUSxDQUFDLFdBQXhDO1FBQ0UsSUFBQSxHQUFPLE1BQUEsQ0FBTyxRQUFRLENBQUMsV0FBaEIsQ0FBNEIsQ0FBQyxXQUE3QixDQUFBO1FBQ1AsSUFBQSxHQUFPLE9BQU8sQ0FBQztRQUVmLEtBQUssQ0FBQyxHQUFOLENBQVUsSUFBVixFQUFnQixJQUFoQixFQUpGOzthQU1BLElBQUMsQ0FBQSxPQUFELEdBQWUsSUFBQSxPQUFBLENBQVEsUUFBUjtJQW5CTCxDQUZaO0lBdUJBLEtBQUEsRUFBTyxTQUFDLEdBQUQsRUFBTSxPQUFOO2FBQ0wsTUFBQSxDQUFPLEdBQVAsRUFBWSxJQUFaLENBQ0UsQ0FBQyxXQURILENBQUE7SUFESyxDQXZCUDtJQTJCQSxLQUFBLEVBQU8sU0FBQyxHQUFELEVBQU0sT0FBTjthQUNMLE1BQUEsQ0FBTyxHQUFQLENBQ0UsQ0FBQyxNQURILENBQ1UsSUFEVjtJQURLLENBM0JQO0lBK0JBLE9BQUEsRUFBUyxTQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWEsT0FBYjthQUNQLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxDQUFBO0lBRE8sQ0EvQlQ7R0FERjtBQUpDLENBTEgiLCJmaWxlIjoiYXBwL2Jhc2UvYmluZGluZ3MvZGF0ZXBpY2tlci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZSBbXG4gICdiYWNrYm9uZSdcbiAgJ2JhY2tib25lLnN0aWNraXQnXG4gICdwaWthZGF5J1xuICAnbW9tZW50J1xuXSwgLT5cbiAgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50JylcbiAgUGlrYWRheSA9IHJlcXVpcmUoJ3Bpa2FkYXknKVxuXG4gIEJhY2tib25lLlN0aWNraXQuYWRkSGFuZGxlclxuICAgIHNlbGVjdG9yOiBcImlucHV0LmRhdGVwaWNrZXJcIlxuXG4gICAgaW5pdGlhbGl6ZTogKCRlbCwgbW9kZWwsIG9wdGlvbnMpIC0+XG5cbiAgICAgIGRlZmF1bHRzID0gXy5leHRlbmQge30sIG9wdGlvbnMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgIHRoZW1lOiAnc2VtYW50aWNfdWknXG4gICAgICAgIGZpZWxkOiAkZWxbMF1cbiAgICAgICAgZm9ybWF0OiBcIkxMXCJcbiAgICAgICAgZmlyc3REYXk6IDFcbiAgICAgICAgY29udGFpbmVyOiAkZWwucGFyZW50cyhcImRpdlwiKVswXVxuICAgICAgICBpMThuOlxuICAgICAgICAgIG1vbnRoczogbW9tZW50Lm1vbnRocygpXG4gICAgICAgICAgd2Vla2RheXM6IG1vbWVudC53ZWVrZGF5cygpXG4gICAgICAgICAgd2Vla2RheXNTaG9ydDogbW9tZW50LndlZWtkYXlzU2hvcnQoKVxuXG4gICAgICBpZiBkZWZhdWx0cy5zZXREZWZhdWx0RGF0ZSBhbmQgZGVmYXVsdHMuZGVmYXVsdERhdGVcbiAgICAgICAgZGF0ZSA9IG1vbWVudChkZWZhdWx0cy5kZWZhdWx0RGF0ZSkudG9JU09TdHJpbmcoKVxuICAgICAgICBhdHRyID0gb3B0aW9ucy5vYnNlcnZlXG5cbiAgICAgICAgbW9kZWwuc2V0IGF0dHIsIGRhdGVcblxuICAgICAgQHBpa2FkYXkgPSBuZXcgUGlrYWRheSBkZWZhdWx0c1xuXG4gICAgb25TZXQ6ICh2YWwsIG9wdGlvbnMpIC0+XG4gICAgICBtb21lbnQgdmFsLCBcIkxMXCJcbiAgICAgICAgLnRvSVNPU3RyaW5nKClcblxuICAgIG9uR2V0OiAodmFsLCBvcHRpb25zKSAtPlxuICAgICAgbW9tZW50IHZhbFxuICAgICAgICAuZm9ybWF0IFwiTExcIlxuXG4gICAgZGVzdHJveTogKCRlbCwgbW9kZWwsIG9wdGlvbnMpIC0+XG4gICAgICBAcGlrYWRheS5kZXN0cm95KClcbiJdfQ==
