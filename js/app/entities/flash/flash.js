var extend=function(e,t){function s(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,slice=[].slice;define(["app/app","base.entities"],function(e,t){return e.module("Entities",function(e,t,s,r,n,a){var o;return e.Flash=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.localStorage=new s.LocalStorage("Flashes"),t.prototype.defaults={timer:5e3,type:void 0,title:void 0,message:void 0},t}(e.Model),e.FlashesCollection=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,t),r.prototype.model=e.Flash,r.prototype.localStorage=new s.LocalStorage("Flashes"),r}(e.Collection),o={getFlashMessages:function(){return this.messages||(this.messages=new e.FlashesCollection),this.messages.fetch(),this.messages},createFlashMessage:function(e,s){var r;return null==s&&(s={}),r=t.reqres.request("flash:entities"),t.commands.execute("when:fetched",r,function(){return r.create(e,s)})}},t.reqres.setHandler("flash:entities",function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],o.getFlashMessages.apply(o,e)}),t.vent.on("flash:create",function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],o.createFlashMessage.apply(o,e)})})});